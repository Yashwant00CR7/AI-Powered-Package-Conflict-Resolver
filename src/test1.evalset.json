{
  "eval_set_id": "test1",
  "name": "test1",
  "eval_cases": [
    {
      "eval_id": "case12c954",
      "conversation": [
        {
          "invocation_id": "e-dc74d3d3-dc3e-490e-acb3-d73f617fd7e0",
          "user_content": {
            "parts": [
              {
                "text": "Google Adk package Ollama chat exception\n\n_APIConnectionError( 2271 message=\"{} - {}\".format(exception_provider, error_str), 2272 llm_provider=custom_llm_provider,APIConnectionError: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"}_"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "**Verification Failed**\n\nThe `validate_requirements` tool detected syntax errors in the provided `requirements.txt` content:\n\n- **Line 2**: `google-generativeai&gt;=0.8.0` ‚Üí Invalid `&gt;=` (use plain `>=` instead of HTML-encoded `&gt;=`).\n- **Line 3**: `ollama&gt;=0.3.3` ‚Üí Invalid `&gt;=` (use plain `>=` instead).\n- **Line 1**: `litellm>=1.66.3,&lt;2.0.0` ‚Üí Invalid `&lt;` (use plain `<` instead of HTML-encoded `&lt;`).\n\n**Fix Suggestion**: Rewrite as plain text (no HTML escaping):\n```\nlitellm>=1.66.3,<2.0.0\ngoogle-generativeai>=0.8.0\nollama>=0.3.3\n```\nRe-generate and resubmit the corrected `requirements.txt` for re-validation. No version conflicts detected (tool focuses on syntax + basic conflicts)."
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "invocation_events": [
              {
                "author": "Web_Crawl_Agent",
                "content": {
                  "parts": [
                    {
                      "function_call": {
                        "id": "call_41488758",
                        "args": {
                          "urls": [
                            "https://github.com/BerriAI/litellm/issues/11148",
                            "https://github.com/ollama/ollama/issues/7991",
                            "https://github.com/BerriAI/litellm/issues/6808"
                          ]
                        },
                        "name": "batch_crawl_tool"
                      }
                    },
                    {
                      "function_call": {
                        "id": "call_76758601",
                        "args": {
                          "urls": [
                            "https://github.com/BerriAI/litellm/issues/6808",
                            "https://ollama.com/blog/openai-compatibility"
                          ]
                        },
                        "name": "batch_crawl_tool"
                      }
                    },
                    {
                      "function_call": {
                        "id": "call_33249163",
                        "args": {
                          "url": "https://github.com/BerriAI/litellm/issues/11148",
                          "query": "Ollama json unmarshal array into ChatRequest.messages.content error"
                        },
                        "name": "adaptive_crawl_tool"
                      }
                    }
                  ],
                  "role": "model"
                }
              },
              {
                "author": "Web_Crawl_Agent",
                "content": {
                  "parts": [
                    {
                      "function_response": {
                        "id": "call_41488758",
                        "name": "batch_crawl_tool",
                        "response": {
                          "result": "# Content from https://github.com/BerriAI/litellm/issues/11148\n\n[Skip to content](https://github.com/BerriAI/litellm/issues/11148#start-of-content)\n## Navigation Menu\nToggle navigation\n[ ](https://github.com/)\n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FBerriAI%2Flitellm%2Fissues%2F11148)\nAppearance settings\n  * Platform\n    * AI CODE CREATION\n      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)\n      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)\n      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)\n      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)\n    * DEVELOPER WORKFLOWS\n      * [ ActionsAutomate any workflow ](https://github.com/features/actions)\n      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)\n      * [ IssuesPlan and track work ](https://github.com/features/issues)\n      * [ Code ReviewManage code changes ](https://github.com/features/code-review)\n    * APPLICATION SECURITY\n      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)\n      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)\n      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)\n    * EXPLORE\n      * [Why GitHub](https://github.com/why-github)\n      * [Documentation](https://docs.github.com)\n      * [Blog](https://github.blog)\n      * [Changelog](https://github.blog/changelog)\n      * [Marketplace](https://github.com/marketplace)\n[View all features](https://github.com/features)\n  * Solutions\n    * BY COMPANY SIZE\n      * [Enterprises](https://github.com/enterprise)\n      * [Small and medium teams](https://github.com/team)\n      * [Startups](https://github.com/enterprise/startups)\n      * [Nonprofits](https://github.com/solutions/industry/nonprofits)\n    * BY USE CASE\n      * [App Modernization](https://github.com/solutions/use-case/app-modernization)\n      * [DevSecOps](https://github.com/solutions/use-case/devsecops)\n      * [DevOps](https://github.com/solutions/use-case/devops)\n      * [CI/CD](https://github.com/solutions/use-case/ci-cd)\n      * [View all use cases](https://github.com/solutions/use-case)\n    * BY INDUSTRY\n      * [Healthcare](https://github.com/solutions/industry/healthcare)\n      * [Financial services](https://github.com/solutions/industry/financial-services)\n      * [Manufacturing](https://github.com/solutions/industry/manufacturing)\n      * [Government](https://github.com/solutions/industry/government)\n      * [View all industries](https://github.com/solutions/industry)\n[View all solutions](https://github.com/solutions)\n  * Resources\n    * EXPLORE BY TOPIC\n      * [AI](https://github.com/resources/articles?topic=ai)\n      * [Software Development](https://github.com/resources/articles?topic=software-development)\n      * [DevOps](https://github.com/resources/articles?topic=devops)\n      * [Security](https://github.com/resources/articles?topic=security)\n      * [View all topics](https://github.com/resources/articles)\n    * EXPLORE BY TYPE\n      * [Customer stories](https://github.com/customer-stories)\n      * [Events & webinars](https://github.com/resources/events)\n      * [Ebooks & reports](https://github.com/resources/whitepapers)\n      * [Business insights](https://github.com/solutions/executive-insights)\n      * [GitHub Skills](https://skills.github.com)\n    * SUPPORT & SERVICES\n      * [Documentation](https://docs.github.com)\n      * [Customer support](https://support.github.com)\n      * [Community forum](https://github.com/orgs/community/discussions)\n      * [Trust center](https://github.com/trust-center)\n      * [Partners](https://github.com/partners)\n  * Open Source\n    * COMMUNITY\n      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)\n    * PROGRAMS\n      * [Security Lab](https://securitylab.github.com)\n      * [Maintainer Community](https://maintainers.github.com)\n      * [Accelerator](https://github.com/accelerator)\n      * [Archive Program](https://archiveprogram.github.com)\n    * REPOSITORIES\n      * [Topics](https://github.com/topics)\n      * [Trending](https://github.com/trending)\n      * [Collections](https://github.com/collections)\n  * Enterprise\n    * ENTERPRISE SOLUTIONS\n      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)\n    * AVAILABLE ADD-ONS\n      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)\n      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)\n      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)\n  * [Pricing](https://github.com/pricing)\n\n\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\nSearch \nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n#  Provide feedback \nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancel  Submit feedback \n#  Saved searches \n## Use saved searches to filter your results more quickly\nName\nQuery\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \nCancel  Create saved search \n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FBerriAI%2Flitellm%2Fissues%2F11148)\n[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=BerriAI%2Flitellm)\nAppearance settings\nResetting focus\nYou signed in with another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/11148) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/11148) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/11148) to refresh your session. Dismiss alert\n{{ message }}\n[ BerriAI ](https://github.com/BerriAI) / **[litellm](https://github.com/BerriAI/litellm) ** Public\n  * Sponsor\n#  Sponsor BerriAI/litellm \n##### External links\n<https://buy.stripe.com/9AQ03Kd3P91o0Q8bIS>\n[Learn more about funding links in repositories](https://docs.github.com/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/displaying-a-sponsor-button-in-your-repository). \n[Report abuse](https://github.com/contact/report-abuse?report=BerriAI%2Flitellm+%28Repository+Funding+Links%29)\n  * [ ](https://github.com/login?return_to=%2FBerriAI%2Flitellm) You must be signed in to change notification settings\n  * [ 4.9k ](https://github.com/login?return_to=%2FBerriAI%2Flitellm)\n  * [ Star  31.7k ](https://github.com/login?return_to=%2FBerriAI%2Flitellm)\n\n\n  * [ Code ](https://github.com/BerriAI/litellm)\n  * [ Issues 1.1k ](https://github.com/BerriAI/litellm/issues)\n  * [ Pull requests 335 ](https://github.com/BerriAI/litellm/pulls)\n  * [ Discussions ](https://github.com/BerriAI/litellm/discussions)\n  * [ Actions ](https://github.com/BerriAI/litellm/actions)\n  * [ Projects 0 ](https://github.com/BerriAI/litellm/projects)\n  * [ Security ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n### [ Uh oh!  ](https://github.com/BerriAI/litellm/security)\n[There was an error while loading. ](https://github.com/BerriAI/litellm/security)[Please reload this page](https://github.com/BerriAI/litellm/issues/11148).\n  * [ Insights ](https://github.com/BerriAI/litellm/pulse)\n\n\nAdditional navigation options\n  * [ Code  ](https://github.com/BerriAI/litellm)\n  * [ Issues  ](https://github.com/BerriAI/litellm/issues)\n  * [ Pull requests  ](https://github.com/BerriAI/litellm/pulls)\n  * [ Discussions  ](https://github.com/BerriAI/litellm/discussions)\n  * [ Actions  ](https://github.com/BerriAI/litellm/actions)\n  * [ Projects  ](https://github.com/BerriAI/litellm/projects)\n  * [ Security  ](https://github.com/BerriAI/litellm/security)\n  * [ Insights  ](https://github.com/BerriAI/litellm/pulse)\n\n\n#  ERROR during agent run: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"} #11148\n[New issue](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/11148)\nCopy link\n[New issue](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/11148)\nCopy link\n[ERROR during agent run: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"}](https://github.com/BerriAI/litellm/issues/11148#top)#11148\nCopy link\nLabels\n[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n[![@abk234](https://avatars.githubusercontent.com/u/192931312?v=4&size=80)](https://github.com/abk234)\n## Description\n[![@abk234](https://avatars.githubusercontent.com/u/192931312?v=4&size=48)](https://github.com/abk234)\n[abk234](https://github.com/abk234)\nopened [on May 26, 2025](https://github.com/BerriAI/litellm/issues/11148#issue-3089686161)\nIssue body actions\nSummary\nWhen using LiteLLM with Ollama as the backend, requests fail with the following error:\n```\nOllama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"}\n\n```\n\nDetails\n  * Ollama‚Äôs API expects each message in the `messages` array to have a `content` field that is a **string**.\n  * LiteLLM (and frameworks built on it, like Google ADK) sometimes send `content` as an array or object (e.g., `{\"content\": [{\"text\": \"hi\"}]}`), which is OpenAI-compatible but **not** Ollama-compatible.\n  * This causes Ollama to reject the request with a JSON unmarshal error.\n\n\nExample of Problematic Payload\n```\n{\n  \"role\": \"user\",\n  \"content\": [{\"text\": \"hi\"}]\n}\n```\n\nOllama expects\n```\n{\n  \"role\": \"user\",\n  \"content\": \"hi\"\n}\n```\n\nSteps to Reproduce\n  1. Use LiteLLM with Ollama as the provider.\n  2. Send a message using a framework (e.g., Google ADK) that builds messages with `content` as an array/object.\n  3. Observe the error from Ollama.\n\n\nSuggested Solution\n  * Before sending the payload to Ollama, ensure that the `content` field in each message is a string.\n  * If `content` is a list of dicts (e.g., `[{\"text\": \"hi\"}]`), join the text fields into a single string.\n  * If `content` is a dict, extract the `\"text\"` field.\n\n\nExample Patch (Python pseudocode):\n```\ndef fix_ollama_messages(messages):\n    for msg in messages:\n        if isinstance(msg.get(\"content\"), list):\n            msg[\"content\"] = \" \".join(part.get(\"text\", \"\") for part in msg[\"content\"])\n        elif isinstance(msg.get(\"content\"), dict):\n            msg[\"content\"] = msg[\"content\"].get(\"text\", \"\")\n    return messages\n```\n\nEnvironment\n  * LiteLLM version: 1.66.3\n  * Ollama version: 0.6.6\n  * Python version: 3.11.7\n  * Frameworks: Google ADK\n\n\nAdditional Context\n  * This issue blocks using LiteLLM with Ollama for any agent framework that uses OpenAI-style message formatting.\n  * See [Ollama API docs](https://github.com/ollama/ollama/blob/main/docs/api.md#chat) for expected payload format.\n\n\n* * *\n**Thank you for your work on LiteLLM!**\nüëçReact with üëç2carl-shen and donadelden\n## Activity\n[![donadelden](https://avatars.githubusercontent.com/u/50483408?u=e50868bbc2a4fcc93f2ec4bff1818488e4c3ab66&v=4&size=80)](https://github.com/donadelden)\n### donadelden commented on Jun 23, 2025 \n[![@donadelden](https://avatars.githubusercontent.com/u/50483408?u=e50868bbc2a4fcc93f2ec4bff1818488e4c3ab66&v=4&size=48)](https://github.com/donadelden)\n[donadelden](https://github.com/donadelden)\n[on Jun 23, 2025](https://github.com/BerriAI/litellm/issues/11148#issuecomment-2996935645)\nMore actions\nThis bug is under discussion in [#11273](https://github.com/BerriAI/litellm/issues/11273), where you can also find a workaround.\n[![github-actions](https://avatars.githubusercontent.com/in/15368?v=4&size=80)](https://github.com/apps/github-actions)\n### github-actions commented on Sep 22, 2025 \n[![@github-actions](https://avatars.githubusercontent.com/in/15368?v=4&size=48)](https://github.com/apps/github-actions)\n[github-actions](https://github.com/apps/github-actions)bot\n[on Sep 22, 2025](https://github.com/BerriAI/litellm/issues/11148#issuecomment-3316357659) ‚Äì with [GitHub Actions](https://help.github.com/en/actions)\nMore actions\nThis issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs.\n[![](https://avatars.githubusercontent.com/in/15368?s=64&v=4)github-actions](https://github.com/apps/github-actions)\nadded \n[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n[on Sep 22, 2025](https://github.com/BerriAI/litellm/issues/11148#event-19825426214)\n[![](https://avatars.githubusercontent.com/in/15368?s=64&v=4)github-actions](https://github.com/apps/github-actions)\nclosed this as [not planned](https://github.com/BerriAI/litellm/issues?q=is%3Aissue%20state%3Aclosed%20archived%3Afalse%20reason%3Anot-planned)[on Sep 29, 2025](https://github.com/BerriAI/litellm/issues/11148#event-19971443744)\n[Sign up for free](https://github.com/signup?return_to=https://github.com/BerriAI/litellm/issues/11148)**to join this conversation on GitHub.** Already have an account? [Sign in to comment](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/11148)\n## Metadata\n## Metadata\n### Assignees\nNo one assigned\n### Labels\n[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n### Type\nNo type\n### Projects\nNo projects\n### Milestone\nNo milestone\n### Relationships\nNone yet\n### Development\nCode with agent mode\nSelect code repository\nNo branches or pull requests\n### Participants\n[![@donadelden](https://avatars.githubusercontent.com/u/50483408?s=64&u=e50868bbc2a4fcc93f2ec4bff1818488e4c3ab66&v=4)](https://github.com/donadelden)[![@abk234](https://avatars.githubusercontent.com/u/192931312?s=64&v=4)](https://github.com/abk234)\n## Issue actions\n## Footer\n[ ](https://github.com) ¬© 2025 GitHub, Inc. \n### Footer navigation\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Community](https://github.community/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\nERROR during agent run: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"} ¬∑ Issue #11148 ¬∑ BerriAI/litellm\n\n\n\n# Content from https://github.com/ollama/ollama/issues/7991\n\n[Skip to content](https://github.com/ollama/ollama/issues/7991#start-of-content)\n## Navigation Menu\nToggle navigation\n[ ](https://github.com/)\n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Follama%2Follama%2Fissues%2F7991)\nAppearance settings\n  * Platform\n    * AI CODE CREATION\n      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)\n      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)\n      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)\n      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)\n    * DEVELOPER WORKFLOWS\n      * [ ActionsAutomate any workflow ](https://github.com/features/actions)\n      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)\n      * [ IssuesPlan and track work ](https://github.com/features/issues)\n      * [ Code ReviewManage code changes ](https://github.com/features/code-review)\n    * APPLICATION SECURITY\n      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)\n      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)\n      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)\n    * EXPLORE\n      * [Why GitHub](https://github.com/why-github)\n      * [Documentation](https://docs.github.com)\n      * [Blog](https://github.blog)\n      * [Changelog](https://github.blog/changelog)\n      * [Marketplace](https://github.com/marketplace)\n[View all features](https://github.com/features)\n  * Solutions\n    * BY COMPANY SIZE\n      * [Enterprises](https://github.com/enterprise)\n      * [Small and medium teams](https://github.com/team)\n      * [Startups](https://github.com/enterprise/startups)\n      * [Nonprofits](https://github.com/solutions/industry/nonprofits)\n    * BY USE CASE\n      * [App Modernization](https://github.com/solutions/use-case/app-modernization)\n      * [DevSecOps](https://github.com/solutions/use-case/devsecops)\n      * [DevOps](https://github.com/solutions/use-case/devops)\n      * [CI/CD](https://github.com/solutions/use-case/ci-cd)\n      * [View all use cases](https://github.com/solutions/use-case)\n    * BY INDUSTRY\n      * [Healthcare](https://github.com/solutions/industry/healthcare)\n      * [Financial services](https://github.com/solutions/industry/financial-services)\n      * [Manufacturing](https://github.com/solutions/industry/manufacturing)\n      * [Government](https://github.com/solutions/industry/government)\n      * [View all industries](https://github.com/solutions/industry)\n[View all solutions](https://github.com/solutions)\n  * Resources\n    * EXPLORE BY TOPIC\n      * [AI](https://github.com/resources/articles?topic=ai)\n      * [Software Development](https://github.com/resources/articles?topic=software-development)\n      * [DevOps](https://github.com/resources/articles?topic=devops)\n      * [Security](https://github.com/resources/articles?topic=security)\n      * [View all topics](https://github.com/resources/articles)\n    * EXPLORE BY TYPE\n      * [Customer stories](https://github.com/customer-stories)\n      * [Events & webinars](https://github.com/resources/events)\n      * [Ebooks & reports](https://github.com/resources/whitepapers)\n      * [Business insights](https://github.com/solutions/executive-insights)\n      * [GitHub Skills](https://skills.github.com)\n    * SUPPORT & SERVICES\n      * [Documentation](https://docs.github.com)\n      * [Customer support](https://support.github.com)\n      * [Community forum](https://github.com/orgs/community/discussions)\n      * [Trust center](https://github.com/trust-center)\n      * [Partners](https://github.com/partners)\n  * Open Source\n    * COMMUNITY\n      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)\n    * PROGRAMS\n      * [Security Lab](https://securitylab.github.com)\n      * [Maintainer Community](https://maintainers.github.com)\n      * [Accelerator](https://github.com/accelerator)\n      * [Archive Program](https://archiveprogram.github.com)\n    * REPOSITORIES\n      * [Topics](https://github.com/topics)\n      * [Trending](https://github.com/trending)\n      * [Collections](https://github.com/collections)\n  * Enterprise\n    * ENTERPRISE SOLUTIONS\n      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)\n    * AVAILABLE ADD-ONS\n      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)\n      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)\n      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)\n  * [Pricing](https://github.com/pricing)\n\n\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\nSearch \nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n#  Provide feedback \nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancel  Submit feedback \n#  Saved searches \n## Use saved searches to filter your results more quickly\nName\nQuery\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \nCancel  Create saved search \n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Follama%2Follama%2Fissues%2F7991)\n[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=ollama%2Follama)\nAppearance settings\nResetting focus\nYou signed in with another tab or window. [Reload](https://github.com/ollama/ollama/issues/7991) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/ollama/ollama/issues/7991) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/ollama/ollama/issues/7991) to refresh your session. Dismiss alert\n{{ message }}\n[ ollama ](https://github.com/ollama) / **[ollama](https://github.com/ollama/ollama) ** Public\n  * [ ](https://github.com/login?return_to=%2Follama%2Follama) You must be signed in to change notification settings\n  * [ 13.8k ](https://github.com/login?return_to=%2Follama%2Follama)\n  * [ Star  157k ](https://github.com/login?return_to=%2Follama%2Follama)\n\n\n  * [ Code ](https://github.com/ollama/ollama)\n  * [ Issues 1.9k ](https://github.com/ollama/ollama/issues)\n  * [ Pull requests 399 ](https://github.com/ollama/ollama/pulls)\n  * [ Actions ](https://github.com/ollama/ollama/actions)\n  * [ Security ](https://github.com/ollama/ollama/security)\n[ ](https://github.com/ollama/ollama/security)\n[ ](https://github.com/ollama/ollama/security)\n[ ](https://github.com/ollama/ollama/security)\n### [ Uh oh!  ](https://github.com/ollama/ollama/security)\n[There was an error while loading. ](https://github.com/ollama/ollama/security)[Please reload this page](https://github.com/ollama/ollama/issues/7991).\n  * [ Insights ](https://github.com/ollama/ollama/pulse)\n\n\nAdditional navigation options\n  * [ Code  ](https://github.com/ollama/ollama)\n  * [ Issues  ](https://github.com/ollama/ollama/issues)\n  * [ Pull requests  ](https://github.com/ollama/ollama/pulls)\n  * [ Actions  ](https://github.com/ollama/ollama/actions)\n  * [ Security  ](https://github.com/ollama/ollama/security)\n  * [ Insights  ](https://github.com/ollama/ollama/pulse)\n\n\n#  {\"error\":\"json: cannot unmarshal object into Go struct field GenerateRequest.format of type string\"} #7991\n[New issue](https://github.com/login?return_to=https://github.com/ollama/ollama/issues/7991)\nCopy link\n[New issue](https://github.com/login?return_to=https://github.com/ollama/ollama/issues/7991)\nCopy link\n[{\"error\":\"json: cannot unmarshal object into Go struct field GenerateRequest.format of type string\"}](https://github.com/ollama/ollama/issues/7991#top)#7991\nCopy link\nLabels\n[bugSomething isn't working](https://github.com/ollama/ollama/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working\n[![@sandersemmel](https://avatars.githubusercontent.com/u/24325573?u=1a46ecf256050e3da14b4accb11154f2a9a8648b&v=4&size=80)](https://github.com/sandersemmel)\n## Description\n[![@sandersemmel](https://avatars.githubusercontent.com/u/24325573?u=1a46ecf256050e3da14b4accb11154f2a9a8648b&v=4&size=48)](https://github.com/sandersemmel)\n[sandersemmel](https://github.com/sandersemmel)\nopened [on Dec 8, 2024](https://github.com/ollama/ollama/issues/7991#issue-2724862885)\nIssue body actions\n### What is the issue?\nI'm trying to have the response be a specific type of JSON. It is mentioned in the documentation:  \n<https://github.com/ollama/ollama/blob/main/docs/api.md#request-structured-outputs>\n```\ncurl -X POST http://localhost:11434/api/generate -H \"Content-Type: application/json\" -d '{                                                                                \n  \"model\": \"phi3\",       \n  \"prompt\": \"Ollama is 22 years old and is busy saving the world. Respond using JSON\",\n  \"stream\": false,\n  \"format\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"age\": {\n        \"type\": \"integer\"\n      },\n      \"available\": {\n        \"type\": \"boolean\"\n      }\n    },\n    \"required\": [\n      \"age\",\n      \"available\"\n    ]\n  }\n}'\n\n```\n\nOutput:\n> {\"error\":\"json: cannot unmarshal object into Go struct field GenerateRequest.format of type string\"}%\nI have also tried other models such as 'llama3:8b' but I get the same message.\n### OS\nmacOS\n### GPU\nNvidia\n### CPU\n_No response_\n### Ollama version\nollama version is 0.3.13\n## Activity\n[![](https://avatars.githubusercontent.com/u/24325573?s=64&u=1a46ecf256050e3da14b4accb11154f2a9a8648b&v=4)sandersemmel](https://github.com/sandersemmel)\nadded \n[bugSomething isn't working](https://github.com/ollama/ollama/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working\n[on Dec 8, 2024](https://github.com/ollama/ollama/issues/7991#event-15570872523)\n[![rick-github](https://avatars.githubusercontent.com/u/14946854?u=2b1c450dd21c3bab62713eb7d6a10d02d79e8b27&v=4&size=80)](https://github.com/rick-github)\n### rick-github commented on Dec 8, 2024 \n[![@rick-github](https://avatars.githubusercontent.com/u/14946854?u=2b1c450dd21c3bab62713eb7d6a10d02d79e8b27&v=4&size=48)](https://github.com/rick-github)\n[rick-github](https://github.com/rick-github)\n[on Dec 8, 2024](https://github.com/ollama/ollama/issues/7991#issuecomment-2525351932)\nCollaborator\nMore actions\nStructured outputs is a feature of [0.5.0](https://github.com/ollama/ollama/releases/tag/v0.5.0) or newer. [Upgrade](https://github.com/ollama/ollama/blob/main/docs/faq.md#how-can-i-upgrade-ollama) ollama.\nüëçReact with üëç5sandersemmel, tianyiblue, joelkoen, rinkorn and kaushikacharya\n[![jmorganca](https://avatars.githubusercontent.com/u/251292?u=a7465aae734d2cbc12d26b885b07d466d969bf0c&v=4&size=80)](https://github.com/jmorganca)\n### jmorganca commented on Dec 8, 2024 \n[![@jmorganca](https://avatars.githubusercontent.com/u/251292?u=a7465aae734d2cbc12d26b885b07d466d969bf0c&v=4&size=48)](https://github.com/jmorganca)\n[jmorganca](https://github.com/jmorganca)\n[on Dec 8, 2024](https://github.com/ollama/ollama/issues/7991#issuecomment-2525376070)\nMember\nMore actions\nThanks for the issue (and thanks [@rick-github](https://github.com/rick-github)!). As mentioned 0.5 is required for structured outputs: <https://ollama.com/download>\nüëçReact with üëç1sandersemmel\n[![](https://avatars.githubusercontent.com/u/251292?s=64&u=a7465aae734d2cbc12d26b885b07d466d969bf0c&v=4)jmorganca](https://github.com/jmorganca)\nclosed this as [completed](https://github.com/ollama/ollama/issues?q=is%3Aissue%20state%3Aclosed%20archived%3Afalse%20reason%3Acompleted)[on Dec 8, 2024](https://github.com/ollama/ollama/issues/7991#event-15571036449)\n[![](https://avatars.githubusercontent.com/u/6594544?s=64&u=4a81006a10842df182e614f1ca1571fe606ddb49&v=4)shniubobo](https://github.com/shniubobo)\nmentioned this [on Feb 10, 2025](https://github.com/ollama/ollama/issues/7991#event-2031227472)\n  * [[ÈîôËØØ]: ÂêëÈáèÂåñ sitemap Êó∂ ollama Êä•Èîô CherryHQ/cherry-studio#1285](https://github.com/CherryHQ/cherry-studio/issues/1285)\n\n\n[![](https://avatars.githubusercontent.com/u/848343?s=64&u=95f4fce3ccbcb92b1e186da8c7be245dfb7c1082&v=4)scosman](https://github.com/scosman)\nmentioned this [on Feb 11, 2025](https://github.com/ollama/ollama/issues/7991#event-2040165258)\n  * [[Bug] Unexpected error: json: cannot unmarshal object into Go struct field ChatRequest.format of type string (status code: 400) Kiln-AI/Kiln#186](https://github.com/Kiln-AI/Kiln/issues/186)\n\n\n[![brauliobo](https://avatars.githubusercontent.com/u/41740?v=4&size=80)](https://github.com/brauliobo)\n### brauliobo commented on Apr 19, 2025 \n[![@brauliobo](https://avatars.githubusercontent.com/u/41740?v=4&size=48)](https://github.com/brauliobo)\n[brauliobo](https://github.com/brauliobo)\n[on Apr 19, 2025](https://github.com/ollama/ollama/issues/7991#issuecomment-2816740453)\nMore actions\nThis might happen due to a version mismatch. ollama should warn on `run` to induce a restart:\n```\nbraulio @ chicopc ‚ûú  ~  ollama run qwen2.5  \n>>> test\nError: error unmarshalling llm prediction response: json: cannot unmarshal number into Go struct field CompletionResponse.done_reason of type string\nbraulio @ chicopc ‚ûú  ~  ollama --version\nollama version is 0.6.4\nWarning: client version is 0.6.5\nbraulio @ chicopc ‚ûú  ~  sudo systemctl restart ollama ollama@2\nFailed to restart ollama@2.service: Unit ollama@2.service not found.\nbraulio @ chicopc ‚ûú  ~  ollama run qwen2.5\n>>> test\nHello! How can I assist you today? Do you have any specific questions or topics you'd like to discuss?\n\n```\n\nüëçReact with üëç1nuaayqm\n[Sign up for free](https://github.com/signup?return_to=https://github.com/ollama/ollama/issues/7991)**to join this conversation on GitHub.** Already have an account? [Sign in to comment](https://github.com/login?return_to=https://github.com/ollama/ollama/issues/7991)\n## Metadata\n## Metadata\n### Assignees\nNo one assigned\n### Labels\n[bugSomething isn't working](https://github.com/ollama/ollama/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working\n### Type\nNo type\n### Projects\nNo projects\n### Milestone\nNo milestone\n### Relationships\nNone yet\n### Development\nCode with agent mode\nSelect code repository\nNo branches or pull requests\n### Participants\n[![@brauliobo](https://avatars.githubusercontent.com/u/41740?s=64&v=4)](https://github.com/brauliobo)[![@jmorganca](https://avatars.githubusercontent.com/u/251292?s=64&u=a7465aae734d2cbc12d26b885b07d466d969bf0c&v=4)](https://github.com/jmorganca)[![@rick-github](https://avatars.githubusercontent.com/u/14946854?s=64&u=2b1c450dd21c3bab62713eb7d6a10d02d79e8b27&v=4)](https://github.com/rick-github)[![@sandersemmel](https://avatars.githubusercontent.com/u/24325573?s=64&u=1a46ecf256050e3da14b4accb11154f2a9a8648b&v=4)](https://github.com/sandersemmel)\n## Issue actions\n## Footer\n[ ](https://github.com) ¬© 2025 GitHub, Inc. \n### Footer navigation\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Community](https://github.community/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\n{\"error\":\"json: cannot unmarshal object into Go struct field GenerateRequest.format of type string\"} ¬∑ Issue #7991 ¬∑ ollama/ollama\n\n\n\n# Content from https://github.com/BerriAI/litellm/issues/6808\n\n[Skip to content](https://github.com/BerriAI/litellm/issues/6808#start-of-content)\n## Navigation Menu\nToggle navigation\n[ ](https://github.com/)\n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FBerriAI%2Flitellm%2Fissues%2F6808)\nAppearance settings\n  * Platform\n    * AI CODE CREATION\n      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)\n      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)\n      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)\n      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)\n    * DEVELOPER WORKFLOWS\n      * [ ActionsAutomate any workflow ](https://github.com/features/actions)\n      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)\n      * [ IssuesPlan and track work ](https://github.com/features/issues)\n      * [ Code ReviewManage code changes ](https://github.com/features/code-review)\n    * APPLICATION SECURITY\n      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)\n      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)\n      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)\n    * EXPLORE\n      * [Why GitHub](https://github.com/why-github)\n      * [Documentation](https://docs.github.com)\n      * [Blog](https://github.blog)\n      * [Changelog](https://github.blog/changelog)\n      * [Marketplace](https://github.com/marketplace)\n[View all features](https://github.com/features)\n  * Solutions\n    * BY COMPANY SIZE\n      * [Enterprises](https://github.com/enterprise)\n      * [Small and medium teams](https://github.com/team)\n      * [Startups](https://github.com/enterprise/startups)\n      * [Nonprofits](https://github.com/solutions/industry/nonprofits)\n    * BY USE CASE\n      * [App Modernization](https://github.com/solutions/use-case/app-modernization)\n      * [DevSecOps](https://github.com/solutions/use-case/devsecops)\n      * [DevOps](https://github.com/solutions/use-case/devops)\n      * [CI/CD](https://github.com/solutions/use-case/ci-cd)\n      * [View all use cases](https://github.com/solutions/use-case)\n    * BY INDUSTRY\n      * [Healthcare](https://github.com/solutions/industry/healthcare)\n      * [Financial services](https://github.com/solutions/industry/financial-services)\n      * [Manufacturing](https://github.com/solutions/industry/manufacturing)\n      * [Government](https://github.com/solutions/industry/government)\n      * [View all industries](https://github.com/solutions/industry)\n[View all solutions](https://github.com/solutions)\n  * Resources\n    * EXPLORE BY TOPIC\n      * [AI](https://github.com/resources/articles?topic=ai)\n      * [Software Development](https://github.com/resources/articles?topic=software-development)\n      * [DevOps](https://github.com/resources/articles?topic=devops)\n      * [Security](https://github.com/resources/articles?topic=security)\n      * [View all topics](https://github.com/resources/articles)\n    * EXPLORE BY TYPE\n      * [Customer stories](https://github.com/customer-stories)\n      * [Events & webinars](https://github.com/resources/events)\n      * [Ebooks & reports](https://github.com/resources/whitepapers)\n      * [Business insights](https://github.com/solutions/executive-insights)\n      * [GitHub Skills](https://skills.github.com)\n    * SUPPORT & SERVICES\n      * [Documentation](https://docs.github.com)\n      * [Customer support](https://support.github.com)\n      * [Community forum](https://github.com/orgs/community/discussions)\n      * [Trust center](https://github.com/trust-center)\n      * [Partners](https://github.com/partners)\n  * Open Source\n    * COMMUNITY\n      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)\n    * PROGRAMS\n      * [Security Lab](https://securitylab.github.com)\n      * [Maintainer Community](https://maintainers.github.com)\n      * [Accelerator](https://github.com/accelerator)\n      * [Archive Program](https://archiveprogram.github.com)\n    * REPOSITORIES\n      * [Topics](https://github.com/topics)\n      * [Trending](https://github.com/trending)\n      * [Collections](https://github.com/collections)\n  * Enterprise\n    * ENTERPRISE SOLUTIONS\n      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)\n    * AVAILABLE ADD-ONS\n      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)\n      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)\n      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)\n  * [Pricing](https://github.com/pricing)\n\n\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\nSearch \nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n#  Provide feedback \nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancel  Submit feedback \n#  Saved searches \n## Use saved searches to filter your results more quickly\nName\nQuery\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \nCancel  Create saved search \n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FBerriAI%2Flitellm%2Fissues%2F6808)\n[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=BerriAI%2Flitellm)\nAppearance settings\nResetting focus\nYou signed in with another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/6808) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/6808) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/6808) to refresh your session. Dismiss alert\n{{ message }}\n[ BerriAI ](https://github.com/BerriAI) / **[litellm](https://github.com/BerriAI/litellm) ** Public\n  * Sponsor\n#  Sponsor BerriAI/litellm \n##### External links\n<https://buy.stripe.com/9AQ03Kd3P91o0Q8bIS>\n[Learn more about funding links in repositories](https://docs.github.com/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/displaying-a-sponsor-button-in-your-repository). \n[Report abuse](https://github.com/contact/report-abuse?report=BerriAI%2Flitellm+%28Repository+Funding+Links%29)\n  * [ ](https://github.com/login?return_to=%2FBerriAI%2Flitellm) You must be signed in to change notification settings\n  * [ 4.9k ](https://github.com/login?return_to=%2FBerriAI%2Flitellm)\n  * [ Star  31.7k ](https://github.com/login?return_to=%2FBerriAI%2Flitellm)\n\n\n  * [ Code ](https://github.com/BerriAI/litellm)\n  * [ Issues 1.1k ](https://github.com/BerriAI/litellm/issues)\n  * [ Pull requests 335 ](https://github.com/BerriAI/litellm/pulls)\n  * [ Discussions ](https://github.com/BerriAI/litellm/discussions)\n  * [ Actions ](https://github.com/BerriAI/litellm/actions)\n  * [ Projects 0 ](https://github.com/BerriAI/litellm/projects)\n  * [ Security ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n### [ Uh oh!  ](https://github.com/BerriAI/litellm/security)\n[There was an error while loading. ](https://github.com/BerriAI/litellm/security)[Please reload this page](https://github.com/BerriAI/litellm/issues/6808).\n  * [ Insights ](https://github.com/BerriAI/litellm/pulse)\n\n\nAdditional navigation options\n  * [ Code  ](https://github.com/BerriAI/litellm)\n  * [ Issues  ](https://github.com/BerriAI/litellm/issues)\n  * [ Pull requests  ](https://github.com/BerriAI/litellm/pulls)\n  * [ Discussions  ](https://github.com/BerriAI/litellm/discussions)\n  * [ Actions  ](https://github.com/BerriAI/litellm/actions)\n  * [ Projects  ](https://github.com/BerriAI/litellm/projects)\n  * [ Security  ](https://github.com/BerriAI/litellm/security)\n  * [ Insights  ](https://github.com/BerriAI/litellm/pulse)\n\n\n#  [Bug]: messages.content array broken with ollama_chat #6808\n[New issue](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/6808)\nCopy link\n[New issue](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/6808)\nCopy link\n[[Bug]: messages.content array broken with ollama_chat](https://github.com/BerriAI/litellm/issues/6808#top)#6808\nCopy link\nLabels\n[bugSomething isn't working](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n[![@linznin](https://avatars.githubusercontent.com/u/11031299?v=4&size=80)](https://github.com/linznin)\n## Description\n[![@linznin](https://avatars.githubusercontent.com/u/11031299?v=4&size=48)](https://github.com/linznin)\n[linznin](https://github.com/linznin)\nopened [on Nov 19, 2024](https://github.com/BerriAI/litellm/issues/6808#issue-2670856833)\nIssue body actions\n### What happened?\nrequest failed array content  \nexample request body:\n```\n{\n    \"messages\": [\n        {\n            \"content\": [\n                {\n                    \"type\": \"text\",\n                    \"text\": \"hi\"\n                }\n            ],\n            \"role\": \"user\"\n        }\n    ],\n    \"model\": \"ollama_chat/taide-chat\",\n    \"stream\": false\n}\n```\n\nresponse:\n```\n{\n    \"error\": {\n        \"message\": \"litellm.APIConnectionError: Ollama_chatException - {\\\"error\\\":\\\"json: cannot unmarshal array into Go struct field ChatRequest.messages of type string\\\"}\\nReceived Model Group=taide-chat\\nAvailable Model Group Fallbacks=None\",\n        \"type\": null,\n        \"param\": null,\n        \"code\": \"500\"\n    }\n}\n```\n\n### Relevant log output\n```\n13:30:26 - LiteLLM Proxy:ERROR: proxy_server.py:3463 - litellm.proxy.proxy_server.chat_completion(): Exception occured - litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages of type string\"}\nReceived Model Group=taide-chat\nAvailable Model Group Fallbacks=None\nTraceback (most recent call last):\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\main.py\", line 470, in acompletion\n    response = await init_response\n               ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\llms\\ollama_chat.py\", line 609, in ollama_acompletion\n    raise e  # don't use verbose_logger.exception, if exception is raised\n    ^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\llms\\ollama_chat.py\", line 548, in ollama_acompletion\n    raise OllamaError(status_code=resp.status, message=text)\nlitellm.llms.ollama_chat.OllamaError: {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages of type string\"}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\proxy\\proxy_server.py\", line 3352, in chat_completion\n    responses = await llm_responses\n                ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 818, in acompletion\n    raise e\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 794, in acompletion\n    response = await self.async_function_with_fallbacks(**kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 2836, in async_function_with_fallbacks\n    raise original_exception\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 2672, in async_function_with_fallbacks\n    response = await self.async_function_with_retries(*args, **kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 2920, in async_function_with_retries\n    response = await self.make_call(original_function, *args, **kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 3017, in make_call\n    response = await response\n               ^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 947, in _acompletion\n    raise e\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 915, in _acompletion\n    response = await _response\n               ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\utils.py\", line 1227, in wrapper_async\n    raise e\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\utils.py\", line 1083, in wrapper_async\n    result = await original_function(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\main.py\", line 492, in acompletion\n    raise exception_type(\n          ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\litellm_core_utils\\exception_mapping_utils.py\", line 2116, in exception_type\n    raise e\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\litellm_core_utils\\exception_mapping_utils.py\", line 2085, in exception_type\n    raise APIConnectionError(\nlitellm.exceptions.APIConnectionError: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages of type string\"}\n```\n\n```\n\n\n### Twitter / LinkedIn details\n\n_No response_\n\n```\n\n## Activity\n[![](https://avatars.githubusercontent.com/u/11031299?s=64&v=4)linznin](https://github.com/linznin)\nadded \n[bugSomething isn't working](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working\n[on Nov 19, 2024](https://github.com/BerriAI/litellm/issues/6808#event-15343971598)\n[![](https://avatars.githubusercontent.com/u/11031299?s=64&v=4)linznin](https://github.com/linznin)\nmentioned this [on Dec 1, 2024](https://github.com/BerriAI/litellm/issues/6808#event-1760671378)\n  * [feat - add vision chat for ollama_chat #6880](https://github.com/BerriAI/litellm/pull/6880)\n\n\n[![](https://avatars.githubusercontent.com/u/5521617?s=64&u=fe8671491464d6445d276e4d83157ff90e5d3afa&v=4)reyna-abhyankar](https://github.com/reyna-abhyankar)\nmentioned this [on Dec 6, 2024](https://github.com/BerriAI/litellm/issues/6808#event-1784724157)\n  * [Issue running the HotPotQA example with DSPy & Ollama GenseeAI/cognify#10](https://github.com/GenseeAI/cognify/issues/10)\n\n\n[![github-actions](https://avatars.githubusercontent.com/in/15368?v=4&size=80)](https://github.com/apps/github-actions)\n### github-actions commented on Feb 18, 2025 \n[![@github-actions](https://avatars.githubusercontent.com/in/15368?v=4&size=48)](https://github.com/apps/github-actions)\n[github-actions](https://github.com/apps/github-actions)bot\n[on Feb 18, 2025](https://github.com/BerriAI/litellm/issues/6808#issuecomment-2664252648) ‚Äì with [GitHub Actions](https://help.github.com/en/actions)\nMore actions\nThis issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs.\n[![](https://avatars.githubusercontent.com/in/15368?s=64&v=4)github-actions](https://github.com/apps/github-actions)\nadded \n[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n[on Feb 18, 2025](https://github.com/BerriAI/litellm/issues/6808#event-16339988471)\n[![](https://avatars.githubusercontent.com/in/15368?s=64&v=4)github-actions](https://github.com/apps/github-actions)\nclosed this as [not planned](https://github.com/BerriAI/litellm/issues?q=is%3Aissue%20state%3Aclosed%20archived%3Afalse%20reason%3Anot-planned)[on Feb 26, 2025](https://github.com/BerriAI/litellm/issues/6808#event-16470543256)\n[![](https://avatars.githubusercontent.com/u/17116851?s=64&u=5ed02fe92c0c5a81a4c6b91b17ef403526c4523b&v=4)isaacbmiller](https://github.com/isaacbmiller)\nmentioned this [on Sep 3, 2025](https://github.com/BerriAI/litellm/issues/6808#event-3198414655)\n  * [[Bug]: ollama_chat erroring for normal image input format #14217](https://github.com/BerriAI/litellm/issues/14217)\n\n\n[Sign up for free](https://github.com/signup?return_to=https://github.com/BerriAI/litellm/issues/6808)**to join this conversation on GitHub.** Already have an account? [Sign in to comment](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/6808)\n## Metadata\n## Metadata\n### Assignees\nNo one assigned\n### Labels\n[bugSomething isn't working](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n### Type\nNo type\n### Projects\nNo projects\n### Milestone\nNo milestone\n### Relationships\nNone yet\n### Development\nCode with agent mode\nSelect code repository\n  * [ feat - add vision chat for ollama_chatBerriAI/litellm ](https://github.com/BerriAI/litellm/pull/6880)\n\n\n### Participants\n[![@linznin](https://avatars.githubusercontent.com/u/11031299?s=64&v=4)](https://github.com/linznin)\n## Issue actions\n## Footer\n[ ](https://github.com) ¬© 2025 GitHub, Inc. \n### Footer navigation\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Community](https://github.community/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\n[Bug]: messages.content array broken with ollama_chat ¬∑ Issue #6808 ¬∑ BerriAI/litellm\n\n\n"
                        }
                      }
                    },
                    {
                      "function_response": {
                        "id": "call_76758601",
                        "name": "batch_crawl_tool",
                        "response": {
                          "result": "# Content from https://github.com/BerriAI/litellm/issues/6808\n\n[Skip to content](https://github.com/BerriAI/litellm/issues/6808#start-of-content)\n## Navigation Menu\nToggle navigation\n[ ](https://github.com/)\n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FBerriAI%2Flitellm%2Fissues%2F6808)\nAppearance settings\n  * Platform\n    * AI CODE CREATION\n      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)\n      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)\n      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)\n      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)\n    * DEVELOPER WORKFLOWS\n      * [ ActionsAutomate any workflow ](https://github.com/features/actions)\n      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)\n      * [ IssuesPlan and track work ](https://github.com/features/issues)\n      * [ Code ReviewManage code changes ](https://github.com/features/code-review)\n    * APPLICATION SECURITY\n      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)\n      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)\n      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)\n    * EXPLORE\n      * [Why GitHub](https://github.com/why-github)\n      * [Documentation](https://docs.github.com)\n      * [Blog](https://github.blog)\n      * [Changelog](https://github.blog/changelog)\n      * [Marketplace](https://github.com/marketplace)\n[View all features](https://github.com/features)\n  * Solutions\n    * BY COMPANY SIZE\n      * [Enterprises](https://github.com/enterprise)\n      * [Small and medium teams](https://github.com/team)\n      * [Startups](https://github.com/enterprise/startups)\n      * [Nonprofits](https://github.com/solutions/industry/nonprofits)\n    * BY USE CASE\n      * [App Modernization](https://github.com/solutions/use-case/app-modernization)\n      * [DevSecOps](https://github.com/solutions/use-case/devsecops)\n      * [DevOps](https://github.com/solutions/use-case/devops)\n      * [CI/CD](https://github.com/solutions/use-case/ci-cd)\n      * [View all use cases](https://github.com/solutions/use-case)\n    * BY INDUSTRY\n      * [Healthcare](https://github.com/solutions/industry/healthcare)\n      * [Financial services](https://github.com/solutions/industry/financial-services)\n      * [Manufacturing](https://github.com/solutions/industry/manufacturing)\n      * [Government](https://github.com/solutions/industry/government)\n      * [View all industries](https://github.com/solutions/industry)\n[View all solutions](https://github.com/solutions)\n  * Resources\n    * EXPLORE BY TOPIC\n      * [AI](https://github.com/resources/articles?topic=ai)\n      * [Software Development](https://github.com/resources/articles?topic=software-development)\n      * [DevOps](https://github.com/resources/articles?topic=devops)\n      * [Security](https://github.com/resources/articles?topic=security)\n      * [View all topics](https://github.com/resources/articles)\n    * EXPLORE BY TYPE\n      * [Customer stories](https://github.com/customer-stories)\n      * [Events & webinars](https://github.com/resources/events)\n      * [Ebooks & reports](https://github.com/resources/whitepapers)\n      * [Business insights](https://github.com/solutions/executive-insights)\n      * [GitHub Skills](https://skills.github.com)\n    * SUPPORT & SERVICES\n      * [Documentation](https://docs.github.com)\n      * [Customer support](https://support.github.com)\n      * [Community forum](https://github.com/orgs/community/discussions)\n      * [Trust center](https://github.com/trust-center)\n      * [Partners](https://github.com/partners)\n  * Open Source\n    * COMMUNITY\n      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)\n    * PROGRAMS\n      * [Security Lab](https://securitylab.github.com)\n      * [Maintainer Community](https://maintainers.github.com)\n      * [Accelerator](https://github.com/accelerator)\n      * [Archive Program](https://archiveprogram.github.com)\n    * REPOSITORIES\n      * [Topics](https://github.com/topics)\n      * [Trending](https://github.com/trending)\n      * [Collections](https://github.com/collections)\n  * Enterprise\n    * ENTERPRISE SOLUTIONS\n      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)\n    * AVAILABLE ADD-ONS\n      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)\n      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)\n      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)\n  * [Pricing](https://github.com/pricing)\n\n\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\nSearch \nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n#  Provide feedback \nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancel  Submit feedback \n#  Saved searches \n## Use saved searches to filter your results more quickly\nName\nQuery\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \nCancel  Create saved search \n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FBerriAI%2Flitellm%2Fissues%2F6808)\n[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=BerriAI%2Flitellm)\nAppearance settings\nResetting focus\nYou signed in with another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/6808) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/6808) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/6808) to refresh your session. Dismiss alert\n{{ message }}\n[ BerriAI ](https://github.com/BerriAI) / **[litellm](https://github.com/BerriAI/litellm) ** Public\n  * Sponsor\n#  Sponsor BerriAI/litellm \n##### External links\n<https://buy.stripe.com/9AQ03Kd3P91o0Q8bIS>\n[Learn more about funding links in repositories](https://docs.github.com/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/displaying-a-sponsor-button-in-your-repository). \n[Report abuse](https://github.com/contact/report-abuse?report=BerriAI%2Flitellm+%28Repository+Funding+Links%29)\n  * [ ](https://github.com/login?return_to=%2FBerriAI%2Flitellm) You must be signed in to change notification settings\n  * [ 4.9k ](https://github.com/login?return_to=%2FBerriAI%2Flitellm)\n  * [ Star  31.7k ](https://github.com/login?return_to=%2FBerriAI%2Flitellm)\n\n\n  * [ Code ](https://github.com/BerriAI/litellm)\n  * [ Issues 1.1k ](https://github.com/BerriAI/litellm/issues)\n  * [ Pull requests 335 ](https://github.com/BerriAI/litellm/pulls)\n  * [ Discussions ](https://github.com/BerriAI/litellm/discussions)\n  * [ Actions ](https://github.com/BerriAI/litellm/actions)\n  * [ Projects 0 ](https://github.com/BerriAI/litellm/projects)\n  * [ Security ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n### [ Uh oh!  ](https://github.com/BerriAI/litellm/security)\n[There was an error while loading. ](https://github.com/BerriAI/litellm/security)[Please reload this page](https://github.com/BerriAI/litellm/issues/6808).\n  * [ Insights ](https://github.com/BerriAI/litellm/pulse)\n\n\nAdditional navigation options\n  * [ Code  ](https://github.com/BerriAI/litellm)\n  * [ Issues  ](https://github.com/BerriAI/litellm/issues)\n  * [ Pull requests  ](https://github.com/BerriAI/litellm/pulls)\n  * [ Discussions  ](https://github.com/BerriAI/litellm/discussions)\n  * [ Actions  ](https://github.com/BerriAI/litellm/actions)\n  * [ Projects  ](https://github.com/BerriAI/litellm/projects)\n  * [ Security  ](https://github.com/BerriAI/litellm/security)\n  * [ Insights  ](https://github.com/BerriAI/litellm/pulse)\n\n\n#  [Bug]: messages.content array broken with ollama_chat #6808\n[New issue](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/6808)\nCopy link\n[New issue](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/6808)\nCopy link\n[[Bug]: messages.content array broken with ollama_chat](https://github.com/BerriAI/litellm/issues/6808#top)#6808\nCopy link\nLabels\n[bugSomething isn't working](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n[![@linznin](https://avatars.githubusercontent.com/u/11031299?v=4&size=80)](https://github.com/linznin)\n## Description\n[![@linznin](https://avatars.githubusercontent.com/u/11031299?v=4&size=48)](https://github.com/linznin)\n[linznin](https://github.com/linznin)\nopened [on Nov 19, 2024](https://github.com/BerriAI/litellm/issues/6808#issue-2670856833)\nIssue body actions\n### What happened?\nrequest failed array content  \nexample request body:\n```\n{\n    \"messages\": [\n        {\n            \"content\": [\n                {\n                    \"type\": \"text\",\n                    \"text\": \"hi\"\n                }\n            ],\n            \"role\": \"user\"\n        }\n    ],\n    \"model\": \"ollama_chat/taide-chat\",\n    \"stream\": false\n}\n```\n\nresponse:\n```\n{\n    \"error\": {\n        \"message\": \"litellm.APIConnectionError: Ollama_chatException - {\\\"error\\\":\\\"json: cannot unmarshal array into Go struct field ChatRequest.messages of type string\\\"}\\nReceived Model Group=taide-chat\\nAvailable Model Group Fallbacks=None\",\n        \"type\": null,\n        \"param\": null,\n        \"code\": \"500\"\n    }\n}\n```\n\n### Relevant log output\n```\n13:30:26 - LiteLLM Proxy:ERROR: proxy_server.py:3463 - litellm.proxy.proxy_server.chat_completion(): Exception occured - litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages of type string\"}\nReceived Model Group=taide-chat\nAvailable Model Group Fallbacks=None\nTraceback (most recent call last):\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\main.py\", line 470, in acompletion\n    response = await init_response\n               ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\llms\\ollama_chat.py\", line 609, in ollama_acompletion\n    raise e  # don't use verbose_logger.exception, if exception is raised\n    ^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\llms\\ollama_chat.py\", line 548, in ollama_acompletion\n    raise OllamaError(status_code=resp.status, message=text)\nlitellm.llms.ollama_chat.OllamaError: {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages of type string\"}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\proxy\\proxy_server.py\", line 3352, in chat_completion\n    responses = await llm_responses\n                ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 818, in acompletion\n    raise e\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 794, in acompletion\n    response = await self.async_function_with_fallbacks(**kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 2836, in async_function_with_fallbacks\n    raise original_exception\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 2672, in async_function_with_fallbacks\n    response = await self.async_function_with_retries(*args, **kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 2920, in async_function_with_retries\n    response = await self.make_call(original_function, *args, **kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 3017, in make_call\n    response = await response\n               ^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 947, in _acompletion\n    raise e\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\router.py\", line 915, in _acompletion\n    response = await _response\n               ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\utils.py\", line 1227, in wrapper_async\n    raise e\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\utils.py\", line 1083, in wrapper_async\n    result = await original_function(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\main.py\", line 492, in acompletion\n    raise exception_type(\n          ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\litellm_core_utils\\exception_mapping_utils.py\", line 2116, in exception_type\n    raise e\n  File \"C:\\Users\\10609302\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\litellm-custom-0ZH-kh0y-py3.11\\Lib\\site-packages\\litellm\\litellm_core_utils\\exception_mapping_utils.py\", line 2085, in exception_type\n    raise APIConnectionError(\nlitellm.exceptions.APIConnectionError: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages of type string\"}\n```\n\n```\n\n\n### Twitter / LinkedIn details\n\n_No response_\n\n```\n\n## Activity\n[![](https://avatars.githubusercontent.com/u/11031299?s=64&v=4)linznin](https://github.com/linznin)\nadded \n[bugSomething isn't working](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working\n[on Nov 19, 2024](https://github.com/BerriAI/litellm/issues/6808#event-15343971598)\n[![](https://avatars.githubusercontent.com/u/11031299?s=64&v=4)linznin](https://github.com/linznin)\nmentioned this [on Dec 1, 2024](https://github.com/BerriAI/litellm/issues/6808#event-1760671378)\n  * [feat - add vision chat for ollama_chat #6880](https://github.com/BerriAI/litellm/pull/6880)\n\n\n[![](https://avatars.githubusercontent.com/u/5521617?s=64&u=fe8671491464d6445d276e4d83157ff90e5d3afa&v=4)reyna-abhyankar](https://github.com/reyna-abhyankar)\nmentioned this [on Dec 6, 2024](https://github.com/BerriAI/litellm/issues/6808#event-1784724157)\n  * [Issue running the HotPotQA example with DSPy & Ollama GenseeAI/cognify#10](https://github.com/GenseeAI/cognify/issues/10)\n\n\n[![github-actions](https://avatars.githubusercontent.com/in/15368?v=4&size=80)](https://github.com/apps/github-actions)\n### github-actions commented on Feb 18, 2025 \n[![@github-actions](https://avatars.githubusercontent.com/in/15368?v=4&size=48)](https://github.com/apps/github-actions)\n[github-actions](https://github.com/apps/github-actions)bot\n[on Feb 18, 2025](https://github.com/BerriAI/litellm/issues/6808#issuecomment-2664252648) ‚Äì with [GitHub Actions](https://help.github.com/en/actions)\nMore actions\nThis issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs.\n[![](https://avatars.githubusercontent.com/in/15368?s=64&v=4)github-actions](https://github.com/apps/github-actions)\nadded \n[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n[on Feb 18, 2025](https://github.com/BerriAI/litellm/issues/6808#event-16339988471)\n[![](https://avatars.githubusercontent.com/in/15368?s=64&v=4)github-actions](https://github.com/apps/github-actions)\nclosed this as [not planned](https://github.com/BerriAI/litellm/issues?q=is%3Aissue%20state%3Aclosed%20archived%3Afalse%20reason%3Anot-planned)[on Feb 26, 2025](https://github.com/BerriAI/litellm/issues/6808#event-16470543256)\n[![](https://avatars.githubusercontent.com/u/17116851?s=64&u=5ed02fe92c0c5a81a4c6b91b17ef403526c4523b&v=4)isaacbmiller](https://github.com/isaacbmiller)\nmentioned this [on Sep 3, 2025](https://github.com/BerriAI/litellm/issues/6808#event-3198414655)\n  * [[Bug]: ollama_chat erroring for normal image input format #14217](https://github.com/BerriAI/litellm/issues/14217)\n\n\n[Sign up for free](https://github.com/signup?return_to=https://github.com/BerriAI/litellm/issues/6808)**to join this conversation on GitHub.** Already have an account? [Sign in to comment](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/6808)\n## Metadata\n## Metadata\n### Assignees\nNo one assigned\n### Labels\n[bugSomething isn't working](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n### Type\nNo type\n### Projects\nNo projects\n### Milestone\nNo milestone\n### Relationships\nNone yet\n### Development\nCode with agent mode\nSelect code repository\n  * [ feat - add vision chat for ollama_chatBerriAI/litellm ](https://github.com/BerriAI/litellm/pull/6880)\n\n\n### Participants\n[![@linznin](https://avatars.githubusercontent.com/u/11031299?s=64&v=4)](https://github.com/linznin)\n## Issue actions\n## Footer\n[ ](https://github.com) ¬© 2025 GitHub, Inc. \n### Footer navigation\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Community](https://github.community/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\n[Bug]: messages.content array broken with ollama_chat ¬∑ Issue #6808 ¬∑ BerriAI/litellm\n\n\n\n# Content from https://ollama.com/blog/openai-compatibility\n\n[ ![Ollama](https://ollama.com/public/ollama.png) ](https://ollama.com/)\n[Models](https://ollama.com/models) [GitHub](https://github.com/ollama/ollama) [Discord](https://discord.gg/ollama) [Docs](https://ollama.com/docs) [Cloud](https://ollama.com/cloud)\n[Sign in](https://ollama.com/signin) [Download](https://ollama.com/download)\n[Models](https://ollama.com/models) [Download](https://ollama.com/download) [GitHub](https://github.com/ollama/ollama) [Discord](https://discord.gg/ollama) [Docs](https://ollama.com/docs) [Cloud](https://ollama.com/cloud) [Sign in](https://ollama.com/signin)\n# OpenAI compatibility\n## February 8, 2024\n![OpenAI compatibility](https://ollama.com/public/blog/openai.png)\nOllama now has built-in compatibility with the OpenAI [Chat Completions API](https://github.com/ollama/ollama/blob/main/docs/openai.md), making it possible to use more tooling and applications with Ollama locally.\n## Setup\nStart by [downloading Ollama](https://ollama.com/download) and pulling a model such as [Llama 2](https://ollama.com/library/llama2) or [Mistral](https://ollama.com/library/mistral):\n```\nollama pull llama2\n\n```\n\n## Usage\n### cURL\nTo invoke Ollama‚Äôs OpenAI compatible API endpoint, use the same [OpenAI format](https://platform.openai.com/docs/quickstart?context=curl) and change the hostname to `http://localhost:11434`:\n```\ncurl http://localhost:11434/v1/chat/completions \\\n    -H \"Content-Type: application/json\" \\\n    -d '{\n        \"model\": \"llama2\",\n        \"messages\": [\n            {\n                \"role\": \"system\",\n                \"content\": \"You are a helpful assistant.\"\n            },\n            {\n                \"role\": \"user\",\n                \"content\": \"Hello!\"\n            }\n        ]\n    }'\n\n```\n\n### OpenAI Python library\n```\nfrom openai import OpenAI\n\nclient = OpenAI(\n    base_url = 'http://localhost:11434/v1',\n    api_key='ollama', # required, but unused\n)\n\nresponse = client.chat.completions.create(\n  model=\"llama2\",\n  messages=[\n    {\"role\": \"system\", \"content\": \"You are a helpful assistant.\"},\n    {\"role\": \"user\", \"content\": \"Who won the world series in 2020?\"},\n    {\"role\": \"assistant\", \"content\": \"The LA Dodgers won in 2020.\"},\n    {\"role\": \"user\", \"content\": \"Where was it played?\"}\n  ]\n)\nprint(response.choices[0].message.content)\n\n```\n\n### OpenAI JavaScript library\n```\nimport OpenAI from 'openai'\n\nconst openai = new OpenAI({\n  baseURL: 'http://localhost:11434/v1',\n  apiKey: 'ollama', // required but unused\n})\n\nconst completion = await openai.chat.completions.create({\n  model: 'llama2',\n  messages: [{ role: 'user', content: 'Why is the sky blue?' }],\n})\n\nconsole.log(completion.choices[0].message.content)\n\n```\n\n## Examples\n### Vercel AI SDK\nThe [Vercel AI SDK](https://sdk.vercel.ai/docs) is an open-source library for building conversational streaming applications. To get started, use `create-next-app` to clone the example repo:\n```\nnpx create-next-app --example https://github.com/vercel/ai/tree/main/examples/next-openai example\ncd example\n\n```\n\nThen make the following two edits in `app/api/chat/route.ts` to update the chat example to use Ollama:\n```\nconst openai = new OpenAI({\n  baseURL: 'http://localhost:11434/v1',\n  apiKey: 'ollama',\n});\n\n```\n```\nconst response = await openai.chat.completions.create({\n  model: 'llama2',\n  stream: true,\n  messages,\n});\n\n```\n\nNext, run the app:\n```\nnpm run dev\n\n```\n\nFinally, open the example app in your browser at <http://localhost:3000>:\n### Autogen\n[Autogen](https://www.microsoft.com/en-us/research/project/autogen/) is a popular open-source framework by Microsoft for building multi-agent applications. For this, example we‚Äôll use the [Code Llama](https://ollama.com/library/codellama) model:\n```\nollama pull codellama\n\n```\n\nInstall Autogen:\n```\npip install pyautogen\n\n```\n\nThen create a Python script `example.py` to use Ollama with Autogen:\n```\nfrom autogen import AssistantAgent, UserProxyAgent\n\nconfig_list = [\n  {\n    \"model\": \"codellama\",\n    \"base_url\": \"http://localhost:11434/v1\",\n    \"api_key\": \"ollama\",\n  }\n]\n\nassistant = AssistantAgent(\"assistant\", llm_config={\"config_list\": config_list})\n\nuser_proxy = UserProxyAgent(\"user_proxy\", code_execution_config={\"work_dir\": \"coding\", \"use_docker\": False})\nuser_proxy.initiate_chat(assistant, message=\"Plot a chart of NVDA and TESLA stock price change YTD.\")\n\n```\n\nLastly, run the example to have the assistant write the code to plot a chart:\n```\npython example.py\n\n```\n\n## More to come\nThis is initial experimental support for the OpenAI API. Future improvements under consideration include:\n  * Embeddings API\n  * Function calling\n  * Vision support\n  * Logprobs\n\n\nGitHub issues [are welcome](https://github.com/ollama/ollama/issues)! For more information, see the OpenAI compatibility [docs](https://github.com/ollama/ollama/blob/main/docs/openai.md).\n¬© 2025 Ollama\n[Download](https://ollama.com/download) [Blog](https://ollama.com/blog) [Docs](https://docs.ollama.com) [GitHub](https://github.com/ollama/ollama) [Discord](https://discord.com/invite/ollama) [X (Twitter)](https://twitter.com/ollama) Contact Us\n  * [Blog](https://ollama.com/blog)\n  * [Download](https://ollama.com/download)\n  * [Docs](https://docs.ollama.com)\n\n\n  * [GitHub](https://github.com/ollama/ollama)\n  * [Discord](https://discord.com/invite/ollama)\n  * [X (Twitter)](https://twitter.com/ollama)\n  * [Meetups](https://lu.ma/ollama)\n\n\n¬© 2025 Ollama Inc. \n\n\n"
                        }
                      }
                    },
                    {
                      "function_response": {
                        "id": "call_33249163",
                        "name": "adaptive_crawl_tool",
                        "response": {
                          "result": "# Adaptive Result from https://github.com/BerriAI/litellm/issues/11148\n\n[Skip to content](https://github.com/BerriAI/litellm/issues/11148#start-of-content)\n## Navigation Menu\nToggle navigation\n[ ](https://github.com/)\n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FBerriAI%2Flitellm%2Fissues%2F11148)\nAppearance settings\n  * Platform\n    * AI CODE CREATION\n      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)\n      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)\n      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)\n      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)\n    * DEVELOPER WORKFLOWS\n      * [ ActionsAutomate any workflow ](https://github.com/features/actions)\n      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)\n      * [ IssuesPlan and track work ](https://github.com/features/issues)\n      * [ Code ReviewManage code changes ](https://github.com/features/code-review)\n    * APPLICATION SECURITY\n      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)\n      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)\n      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)\n    * EXPLORE\n      * [Why GitHub](https://github.com/why-github)\n      * [Documentation](https://docs.github.com)\n      * [Blog](https://github.blog)\n      * [Changelog](https://github.blog/changelog)\n      * [Marketplace](https://github.com/marketplace)\n[View all features](https://github.com/features)\n  * Solutions\n    * BY COMPANY SIZE\n      * [Enterprises](https://github.com/enterprise)\n      * [Small and medium teams](https://github.com/team)\n      * [Startups](https://github.com/enterprise/startups)\n      * [Nonprofits](https://github.com/solutions/industry/nonprofits)\n    * BY USE CASE\n      * [App Modernization](https://github.com/solutions/use-case/app-modernization)\n      * [DevSecOps](https://github.com/solutions/use-case/devsecops)\n      * [DevOps](https://github.com/solutions/use-case/devops)\n      * [CI/CD](https://github.com/solutions/use-case/ci-cd)\n      * [View all use cases](https://github.com/solutions/use-case)\n    * BY INDUSTRY\n      * [Healthcare](https://github.com/solutions/industry/healthcare)\n      * [Financial services](https://github.com/solutions/industry/financial-services)\n      * [Manufacturing](https://github.com/solutions/industry/manufacturing)\n      * [Government](https://github.com/solutions/industry/government)\n      * [View all industries](https://github.com/solutions/industry)\n[View all solutions](https://github.com/solutions)\n  * Resources\n    * EXPLORE BY TOPIC\n      * [AI](https://github.com/resources/articles?topic=ai)\n      * [Software Development](https://github.com/resources/articles?topic=software-development)\n      * [DevOps](https://github.com/resources/articles?topic=devops)\n      * [Security](https://github.com/resources/articles?topic=security)\n      * [View all topics](https://github.com/resources/articles)\n    * EXPLORE BY TYPE\n      * [Customer stories](https://github.com/customer-stories)\n      * [Events & webinars](https://github.com/resources/events)\n      * [Ebooks & reports](https://github.com/resources/whitepapers)\n      * [Business insights](https://github.com/solutions/executive-insights)\n      * [GitHub Skills](https://skills.github.com)\n    * SUPPORT & SERVICES\n      * [Documentation](https://docs.github.com)\n      * [Customer support](https://support.github.com)\n      * [Community forum](https://github.com/orgs/community/discussions)\n      * [Trust center](https://github.com/trust-center)\n      * [Partners](https://github.com/partners)\n  * Open Source\n    * COMMUNITY\n      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)\n    * PROGRAMS\n      * [Security Lab](https://securitylab.github.com)\n      * [Maintainer Community](https://maintainers.github.com)\n      * [Accelerator](https://github.com/accelerator)\n      * [Archive Program](https://archiveprogram.github.com)\n    * REPOSITORIES\n      * [Topics](https://github.com/topics)\n      * [Trending](https://github.com/trending)\n      * [Collections](https://github.com/collections)\n  * Enterprise\n    * ENTERPRISE SOLUTIONS\n      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)\n    * AVAILABLE ADD-ONS\n      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)\n      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)\n      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)\n  * [Pricing](https://github.com/pricing)\n\n\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\nSearch \nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n#  Provide feedback \nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancel  Submit feedback \n#  Saved searches \n## Use saved searches to filter your results more quickly\nName\nQuery\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \nCancel  Create saved search \n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FBerriAI%2Flitellm%2Fissues%2F11148)\n[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=BerriAI%2Flitellm)\nAppearance settings\nResetting focus\nYou signed in with another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/11148) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/11148) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/BerriAI/litellm/issues/11148) to refresh your session. Dismiss alert\n{{ message }}\n[ BerriAI ](https://github.com/BerriAI) / **[litellm](https://github.com/BerriAI/litellm) ** Public\n  * Sponsor\n#  Sponsor BerriAI/litellm \n##### External links\n<https://buy.stripe.com/9AQ03Kd3P91o0Q8bIS>\n[Learn more about funding links in repositories](https://docs.github.com/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/displaying-a-sponsor-button-in-your-repository). \n[Report abuse](https://github.com/contact/report-abuse?report=BerriAI%2Flitellm+%28Repository+Funding+Links%29)\n  * [ ](https://github.com/login?return_to=%2FBerriAI%2Flitellm) You must be signed in to change notification settings\n  * [ 4.9k ](https://github.com/login?return_to=%2FBerriAI%2Flitellm)\n  * [ Star  31.7k ](https://github.com/login?return_to=%2FBerriAI%2Flitellm)\n\n\n  * [ Code ](https://github.com/BerriAI/litellm)\n  * [ Issues 1.1k ](https://github.com/BerriAI/litellm/issues)\n  * [ Pull requests 335 ](https://github.com/BerriAI/litellm/pulls)\n  * [ Discussions ](https://github.com/BerriAI/litellm/discussions)\n  * [ Actions ](https://github.com/BerriAI/litellm/actions)\n  * [ Projects 0 ](https://github.com/BerriAI/litellm/projects)\n  * [ Security ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n[ ](https://github.com/BerriAI/litellm/security)\n### [ Uh oh!  ](https://github.com/BerriAI/litellm/security)\n[There was an error while loading. ](https://github.com/BerriAI/litellm/security)[Please reload this page](https://github.com/BerriAI/litellm/issues/11148).\n  * [ Insights ](https://github.com/BerriAI/litellm/pulse)\n\n\nAdditional navigation options\n  * [ Code  ](https://github.com/BerriAI/litellm)\n  * [ Issues  ](https://github.com/BerriAI/litellm/issues)\n  * [ Pull requests  ](https://github.com/BerriAI/litellm/pulls)\n  * [ Discussions  ](https://github.com/BerriAI/litellm/discussions)\n  * [ Actions  ](https://github.com/BerriAI/litellm/actions)\n  * [ Projects  ](https://github.com/BerriAI/litellm/projects)\n  * [ Security  ](https://github.com/BerriAI/litellm/security)\n  * [ Insights  ](https://github.com/BerriAI/litellm/pulse)\n\n\n#  ERROR during agent run: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"} #11148\n[New issue](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/11148)\nCopy link\n[New issue](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/11148)\nCopy link\n[ERROR during agent run: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"}](https://github.com/BerriAI/litellm/issues/11148#top)#11148\nCopy link\nLabels\n[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n[![@abk234](https://avatars.githubusercontent.com/u/192931312?v=4&size=80)](https://github.com/abk234)\n## Description\n[![@abk234](https://avatars.githubusercontent.com/u/192931312?v=4&size=48)](https://github.com/abk234)\n[abk234](https://github.com/abk234)\nopened [on May 26, 2025](https://github.com/BerriAI/litellm/issues/11148#issue-3089686161)\nIssue body actions\nSummary\nWhen using LiteLLM with Ollama as the backend, requests fail with the following error:\n```\nOllama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"}\n\n```\n\nDetails\n  * Ollama‚Äôs API expects each message in the `messages` array to have a `content` field that is a **string**.\n  * LiteLLM (and frameworks built on it, like Google ADK) sometimes send `content` as an array or object (e.g., `{\"content\": [{\"text\": \"hi\"}]}`), which is OpenAI-compatible but **not** Ollama-compatible.\n  * This causes Ollama to reject the request with a JSON unmarshal error.\n\n\nExample of Problematic Payload\n```\n{\n  \"role\": \"user\",\n  \"content\": [{\"text\": \"hi\"}]\n}\n```\n\nOllama expects\n```\n{\n  \"role\": \"user\",\n  \"content\": \"hi\"\n}\n```\n\nSteps to Reproduce\n  1. Use LiteLLM with Ollama as the provider.\n  2. Send a message using a framework (e.g., Google ADK) that builds messages with `content` as an array/object.\n  3. Observe the error from Ollama.\n\n\nSuggested Solution\n  * Before sending the payload to Ollama, ensure that the `content` field in each message is a string.\n  * If `content` is a list of dicts (e.g., `[{\"text\": \"hi\"}]`), join the text fields into a single string.\n  * If `content` is a dict, extract the `\"text\"` field.\n\n\nExample Patch (Python pseudocode):\n```\ndef fix_ollama_messages(messages):\n    for msg in messages:\n        if isinstance(msg.get(\"content\"), list):\n            msg[\"content\"] = \" \".join(part.get(\"text\", \"\") for part in msg[\"content\"])\n        elif isinstance(msg.get(\"content\"), dict):\n            msg[\"content\"] = msg[\"content\"].get(\"text\", \"\")\n    return messages\n```\n\nEnvironment\n  * LiteLLM version: 1.66.3\n  * Ollama version: 0.6.6\n  * Python version: 3.11.7\n  * Frameworks: Google ADK\n\n\nAdditional Context\n  * This issue blocks using LiteLLM with Ollama for any agent framework that uses OpenAI-style message formatting.\n  * See [Ollama API docs](https://github.com/ollama/ollama/blob/main/docs/api.md#chat) for expected payload format.\n\n\n* * *\n**Thank you for your work on LiteLLM!**\nüëçReact with üëç2carl-shen and donadelden\n## Activity\n[![donadelden](https://avatars.githubusercontent.com/u/50483408?u=e50868bbc2a4fcc93f2ec4bff1818488e4c3ab66&v=4&size=80)](https://github.com/donadelden)\n### donadelden commented on Jun 23, 2025 \n[![@donadelden](https://avatars.githubusercontent.com/u/50483408?u=e50868bbc2a4fcc93f2ec4bff1818488e4c3ab66&v=4&size=48)](https://github.com/donadelden)\n[donadelden](https://github.com/donadelden)\n[on Jun 23, 2025](https://github.com/BerriAI/litellm/issues/11148#issuecomment-2996935645)\nMore actions\nThis bug is under discussion in [#11273](https://github.com/BerriAI/litellm/issues/11273), where you can also find a workaround.\n[![github-actions](https://avatars.githubusercontent.com/in/15368?v=4&size=80)](https://github.com/apps/github-actions)\n### github-actions commented on Sep 22, 2025 \n[![@github-actions](https://avatars.githubusercontent.com/in/15368?v=4&size=48)](https://github.com/apps/github-actions)\n[github-actions](https://github.com/apps/github-actions)bot\n[on Sep 22, 2025](https://github.com/BerriAI/litellm/issues/11148#issuecomment-3316357659) ‚Äì with [GitHub Actions](https://help.github.com/en/actions)\nMore actions\nThis issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs.\n[![](https://avatars.githubusercontent.com/in/15368?s=64&v=4)github-actions](https://github.com/apps/github-actions)\nadded \n[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n[on Sep 22, 2025](https://github.com/BerriAI/litellm/issues/11148#event-19825426214)\n[![](https://avatars.githubusercontent.com/in/15368?s=64&v=4)github-actions](https://github.com/apps/github-actions)\nclosed this as [not planned](https://github.com/BerriAI/litellm/issues?q=is%3Aissue%20state%3Aclosed%20archived%3Afalse%20reason%3Anot-planned)[on Sep 29, 2025](https://github.com/BerriAI/litellm/issues/11148#event-19971443744)\n[Sign up for free](https://github.com/signup?return_to=https://github.com/BerriAI/litellm/issues/11148)**to join this conversation on GitHub.** Already have an account? [Sign in to comment](https://github.com/login?return_to=https://github.com/BerriAI/litellm/issues/11148)\n## Metadata\n## Metadata\n### Assignees\nNo one assigned\n### Labels\n[stale](https://github.com/BerriAI/litellm/issues?q=state%3Aopen%20label%3A%22stale%22)\n### Type\nNo type\n### Projects\nNo projects\n### Milestone\nNo milestone\n### Relationships\nNone yet\n### Development\nCode with agent mode\nSelect code repository\nNo branches or pull requests\n### Participants\n[![@donadelden](https://avatars.githubusercontent.com/u/50483408?s=64&u=e50868bbc2a4fcc93f2ec4bff1818488e4c3ab66&v=4)](https://github.com/donadelden)[![@abk234](https://avatars.githubusercontent.com/u/192931312?s=64&v=4)](https://github.com/abk234)\n## Issue actions\n## Footer\n[ ](https://github.com) ¬© 2025 GitHub, Inc. \n### Footer navigation\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Community](https://github.community/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\nERROR during agent run: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"} ¬∑ Issue #11148 ¬∑ BerriAI/litellm\n"
                        }
                      }
                    }
                  ],
                  "role": "user"
                }
              },
              {
                "author": "Code_Surgeon_Agent",
                "content": {
                  "parts": [
                    {
                      "function_call": {
                        "id": "call_54868388",
                        "args": {
                          "key": "packages"
                        },
                        "name": "retrieve_context"
                      }
                    },
                    {
                      "function_call": {
                        "id": "call_13648057",
                        "args": {
                          "key": "versions"
                        },
                        "name": "retrieve_context"
                      }
                    }
                  ],
                  "role": "model"
                }
              },
              {
                "author": "Code_Surgeon_Agent",
                "content": {
                  "parts": [
                    {
                      "function_response": {
                        "id": "call_54868388",
                        "name": "retrieve_context",
                        "response": {
                          "result": "Not found"
                        }
                      }
                    },
                    {
                      "function_response": {
                        "id": "call_13648057",
                        "name": "retrieve_context",
                        "response": {
                          "result": "Not found"
                        }
                      }
                    }
                  ],
                  "role": "user"
                }
              },
              {
                "author": "Verification_Agent",
                "content": {
                  "parts": [
                    {
                      "function_call": {
                        "id": "call_30313070",
                        "args": {
                          "requirements_content": "litellm>=1.66.3,&lt;2.0.0  # Post-issue version; supports better Ollama handling + vision (PR #6880)\ngoogle-generativeai&gt;=0.8.0  # If using Vertex AI/ADK proxy (common in Google ADK setups)\nollama&gt;=0.3.3  # Python client for direct Ollama (optional; use for testing)"
                        },
                        "name": "validate_requirements"
                      }
                    }
                  ],
                  "role": "model"
                }
              },
              {
                "author": "Verification_Agent",
                "content": {
                  "parts": [
                    {
                      "function_response": {
                        "id": "call_30313070",
                        "name": "validate_requirements",
                        "response": {
                          "result": "Validation Failed: Invalid syntax: google-generativeai&gt;=0.8.0  # If using Vertex AI/ADK proxy (common in Google ADK setups); Invalid syntax: ollama&gt;=0.3.3  # Python client for direct Ollama (optional; use for testing)"
                        }
                      }
                    }
                  ],
                  "role": "user"
                }
              },
              {
                "author": "Verification_Agent",
                "content": {
                  "parts": [
                    {
                      "function_call": {
                        "id": "call_07269799",
                        "args": {
                          "key": "verification_status",
                          "value": "FAILED"
                        },
                        "name": "save_context"
                      }
                    }
                  ],
                  "role": "model"
                }
              },
              {
                "author": "Verification_Agent",
                "content": {
                  "parts": [
                    {
                      "function_response": {
                        "id": "call_07269799",
                        "name": "save_context",
                        "response": {
                          "result": "Saved verification_status to state."
                        }
                      }
                    }
                  ],
                  "role": "user"
                }
              }
            ]
          },
          "creation_timestamp": 1764335399.240284
        }
      ],
      "session_input": {
        "app_name": "src",
        "user_id": "user"
      },
      "creation_timestamp": 1764335924.4398093
    },
    {
      "eval_id": "case19bde2",
      "conversation": [
        {
          "invocation_id": "e-cbbd83ac-f98a-4122-9cfd-cf8f52d3f4d4",
          "user_content": {
            "parts": [
              {
                "text": "https://github.com/google/adk-python/issues/3726 i got the similar issue"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "Verification Passed"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "invocation_events": [
              {
                "author": "Web_Crawl_Agent",
                "content": {
                  "parts": [
                    {
                      "function_call": {
                        "id": "call_50080286",
                        "args": {
                          "urls": [
                            "https://github.com/google/adk-python/issues/3726"
                          ]
                        },
                        "name": "batch_crawl_tool"
                      }
                    },
                    {
                      "function_call": {
                        "id": "call_81397642",
                        "args": {
                          "urls": [
                            "https://github.com/google/adk-python"
                          ]
                        },
                        "name": "batch_crawl_tool"
                      }
                    },
                    {
                      "function_call": {
                        "id": "call_89754013",
                        "args": {
                          "url": "https://github.com/google/adk-python",
                          "query": "response_evaluator.py float item error"
                        },
                        "name": "adaptive_crawl_tool"
                      }
                    },
                    {
                      "function_call": {
                        "id": "call_59130861",
                        "args": {
                          "url": "https://github.com/google/adk-python/issues",
                          "query": "float int mismatch AttributeError item"
                        },
                        "name": "adaptive_crawl_tool"
                      }
                    }
                  ],
                  "role": "model"
                }
              },
              {
                "author": "Web_Crawl_Agent",
                "content": {
                  "parts": [
                    {
                      "function_response": {
                        "id": "call_50080286",
                        "name": "batch_crawl_tool",
                        "response": {
                          "result": "# Content from https://github.com/google/adk-python/issues/3726\n\n[Skip to content](https://github.com/google/adk-python/issues/3726#start-of-content)\n## Navigation Menu\nToggle navigation\n[ ](https://github.com/)\n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python%2Fissues%2F3726)\nAppearance settings\n  * Platform\n    * AI CODE CREATION\n      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)\n      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)\n      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)\n      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)\n    * DEVELOPER WORKFLOWS\n      * [ ActionsAutomate any workflow ](https://github.com/features/actions)\n      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)\n      * [ IssuesPlan and track work ](https://github.com/features/issues)\n      * [ Code ReviewManage code changes ](https://github.com/features/code-review)\n    * APPLICATION SECURITY\n      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)\n      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)\n      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)\n    * EXPLORE\n      * [Why GitHub](https://github.com/why-github)\n      * [Documentation](https://docs.github.com)\n      * [Blog](https://github.blog)\n      * [Changelog](https://github.blog/changelog)\n      * [Marketplace](https://github.com/marketplace)\n[View all features](https://github.com/features)\n  * Solutions\n    * BY COMPANY SIZE\n      * [Enterprises](https://github.com/enterprise)\n      * [Small and medium teams](https://github.com/team)\n      * [Startups](https://github.com/enterprise/startups)\n      * [Nonprofits](https://github.com/solutions/industry/nonprofits)\n    * BY USE CASE\n      * [App Modernization](https://github.com/solutions/use-case/app-modernization)\n      * [DevSecOps](https://github.com/solutions/use-case/devsecops)\n      * [DevOps](https://github.com/solutions/use-case/devops)\n      * [CI/CD](https://github.com/solutions/use-case/ci-cd)\n      * [View all use cases](https://github.com/solutions/use-case)\n    * BY INDUSTRY\n      * [Healthcare](https://github.com/solutions/industry/healthcare)\n      * [Financial services](https://github.com/solutions/industry/financial-services)\n      * [Manufacturing](https://github.com/solutions/industry/manufacturing)\n      * [Government](https://github.com/solutions/industry/government)\n      * [View all industries](https://github.com/solutions/industry)\n[View all solutions](https://github.com/solutions)\n  * Resources\n    * EXPLORE BY TOPIC\n      * [AI](https://github.com/resources/articles?topic=ai)\n      * [Software Development](https://github.com/resources/articles?topic=software-development)\n      * [DevOps](https://github.com/resources/articles?topic=devops)\n      * [Security](https://github.com/resources/articles?topic=security)\n      * [View all topics](https://github.com/resources/articles)\n    * EXPLORE BY TYPE\n      * [Customer stories](https://github.com/customer-stories)\n      * [Events & webinars](https://github.com/resources/events)\n      * [Ebooks & reports](https://github.com/resources/whitepapers)\n      * [Business insights](https://github.com/solutions/executive-insights)\n      * [GitHub Skills](https://skills.github.com)\n    * SUPPORT & SERVICES\n      * [Documentation](https://docs.github.com)\n      * [Customer support](https://support.github.com)\n      * [Community forum](https://github.com/orgs/community/discussions)\n      * [Trust center](https://github.com/trust-center)\n      * [Partners](https://github.com/partners)\n  * Open Source\n    * COMMUNITY\n      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)\n    * PROGRAMS\n      * [Security Lab](https://securitylab.github.com)\n      * [Maintainer Community](https://maintainers.github.com)\n      * [Accelerator](https://github.com/accelerator)\n      * [Archive Program](https://archiveprogram.github.com)\n    * REPOSITORIES\n      * [Topics](https://github.com/topics)\n      * [Trending](https://github.com/trending)\n      * [Collections](https://github.com/collections)\n  * Enterprise\n    * ENTERPRISE SOLUTIONS\n      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)\n    * AVAILABLE ADD-ONS\n      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)\n      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)\n      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)\n  * [Pricing](https://github.com/pricing)\n\n\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\nSearch \nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n#  Provide feedback \nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancel  Submit feedback \n#  Saved searches \n## Use saved searches to filter your results more quickly\nName\nQuery\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \nCancel  Create saved search \n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python%2Fissues%2F3726)\n[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=google%2Fadk-python)\nAppearance settings\nResetting focus\nYou signed in with another tab or window. [Reload](https://github.com/google/adk-python/issues/3726) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/google/adk-python/issues/3726) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/google/adk-python/issues/3726) to refresh your session. Dismiss alert\n{{ message }}\n[ google ](https://github.com/google) / **[adk-python](https://github.com/google/adk-python) ** Public\n  * [ ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python) You must be signed in to change notification settings\n  * [ 2.5k ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n  * [ Star  15.7k ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n\n\n  * [ Code ](https://github.com/google/adk-python)\n  * [ Issues 354 ](https://github.com/google/adk-python/issues)\n  * [ Pull requests 102 ](https://github.com/google/adk-python/pulls)\n  * [ Discussions ](https://github.com/google/adk-python/discussions)\n  * [ Actions ](https://github.com/google/adk-python/actions)\n  * [ Projects 0 ](https://github.com/google/adk-python/projects)\n  * [ Security ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n### [ Uh oh!  ](https://github.com/google/adk-python/security)\n[There was an error while loading. ](https://github.com/google/adk-python/security)[Please reload this page](https://github.com/google/adk-python/issues/3726).\n  * [ Insights ](https://github.com/google/adk-python/pulse)\n\n\nAdditional navigation options\n  * [ Code  ](https://github.com/google/adk-python)\n  * [ Issues  ](https://github.com/google/adk-python/issues)\n  * [ Pull requests  ](https://github.com/google/adk-python/pulls)\n  * [ Discussions  ](https://github.com/google/adk-python/discussions)\n  * [ Actions  ](https://github.com/google/adk-python/actions)\n  * [ Projects  ](https://github.com/google/adk-python/projects)\n  * [ Security  ](https://github.com/google/adk-python/security)\n  * [ Insights  ](https://github.com/google/adk-python/pulse)\n\n\n#  Ollama and Gemini Model Integration #3726\n[New issue](https://github.com/login?return_to=https://github.com/google/adk-python/issues/3726)\nCopy link\n[New issue](https://github.com/login?return_to=https://github.com/google/adk-python/issues/3726)\nCopy link\n[Bug](https://github.com/google/adk-python/issues?q=type:\"Bug\")\n[Ollama and Gemini Model Integration](https://github.com/google/adk-python/issues/3726#top)#3726\nBug\nCopy link\nAssignees\n[![wyf7107](https://avatars.githubusercontent.com/u/14008276?s=64&v=4)](https://github.com/wyf7107)[![surajksharma07](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)](https://github.com/surajksharma07)\nLabels\n[models[Component] Issues related to model support](https://github.com/google/adk-python/issues?q=state%3Aopen%20label%3A%22models%22)[Component] Issues related to model support[need attention[Status] This issue is important but the maintainers haven't started working on it](https://github.com/google/adk-python/issues?q=state%3Aopen%20label%3A%22need%20attention%22)[Status] This issue is important but the maintainers haven't started working on it\n[![@Yashwant00CR7](https://avatars.githubusercontent.com/u/146008508?u=bcaf596a8cff7207f0941ee4b2b7190c7e045ecd&v=4&size=80)](https://github.com/Yashwant00CR7)\n## Description\n[![@Yashwant00CR7](https://avatars.githubusercontent.com/u/146008508?u=bcaf596a8cff7207f0941ee4b2b7190c7e045ecd&v=4&size=48)](https://github.com/Yashwant00CR7)\n[Yashwant00CR7](https://github.com/Yashwant00CR7)\nopened [on Nov 26, 2025](https://github.com/google/adk-python/issues/3726#issue-3668587947)\nIssue body actions\n## While Integrating the _Gemini and Ollama_ model using the LiteLlm through a _**Sequential Agent**_ Igot an error like this\n`_APIConnectionError( 2271 message=\"{} - {}\".format(exception_provider, error_str), 2272 llm_provider=custom_llm_provider,APIConnectionError: litellm.APIConnectionError: Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"}_`\n## But when I Used\n### `model=LiteLlm(model=\"openai/qwen2.5:7b\")`\n## Instead of\n#### `model=LiteLlm(model=\"ollama_chat/qwen2.5:7b\")`\n#### My error Got solved and my Sequential Agent was Working Fine\nJust Wanted to Help !!!!\n## Activity\n[![surajksharma07](https://avatars.githubusercontent.com/u/228440606?u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4&size=80)](https://github.com/surajksharma07)\n### surajksharma07 commented on Nov 27, 2025 \n[![@surajksharma07](https://avatars.githubusercontent.com/u/228440606?u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4&size=48)](https://github.com/surajksharma07)\n[surajksharma07](https://github.com/surajksharma07)\n[on Nov 27, 2025](https://github.com/google/adk-python/issues/3726#issuecomment-3582748147)\nCollaborator\nMore actions\n[@Yashwant00CR7](https://github.com/Yashwant00CR7) The issue is that Ollama's API expects message content to always be a string, but when using SequentialAgent or multi-part content, ADK sends an array format (which works for OpenAI but breaks Ollama).\nYour workaround using `openai/qwen2.5:7b` instead of `ollama_chat/qwen2.5:7b` is the correct solution - this makes LiteLLM use OpenAI-compatible formatting which Ollama supports.\nFor a permanent fix, we'd need to add provider-specific content formatting in ADK to automatically flatten arrays to strings when detecting Ollama.\nThanks for sharing this workaround.\n[![](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)surajksharma07](https://github.com/surajksharma07)\nassigned \n[surajksharma07](https://github.com/surajksharma07)\nand\n[wyf7107](https://github.com/wyf7107)\n[on Nov 27, 2025](https://github.com/google/adk-python/issues/3726#event-21203144503)\n[![surajksharma07](https://avatars.githubusercontent.com/u/228440606?u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4&size=80)](https://github.com/surajksharma07)\n### surajksharma07 commented on Nov 27, 2025 \n[![@surajksharma07](https://avatars.githubusercontent.com/u/228440606?u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4&size=48)](https://github.com/surajksharma07)\n[surajksharma07](https://github.com/surajksharma07)\n[on Nov 27, 2025](https://github.com/google/adk-python/issues/3726#issuecomment-3582751810)\nCollaborator\nMore actions\n[@wyf7107](https://github.com/wyf7107) Please have a look into it.\n[![](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)surajksharma07](https://github.com/surajksharma07)\nadded \n[models[Component] Issues related to model support](https://github.com/google/adk-python/issues?q=state%3Aopen%20label%3A%22models%22)[Component] Issues related to model support\n[on Nov 27, 2025](https://github.com/google/adk-python/issues/3726#event-21203175242)\n[![](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)surajksharma07](https://github.com/surajksharma07)\nadded the\n[Bug](https://github.com/google/adk-python/issues?q=type:\"Bug\")\nissue type [on Nov 27, 2025](https://github.com/google/adk-python/issues/3726#event-21203176671)\n[![](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)surajksharma07](https://github.com/surajksharma07)\nadded \n[need attention[Status] This issue is important but the maintainers haven't started working on it](https://github.com/google/adk-python/issues?q=state%3Aopen%20label%3A%22need%20attention%22)[Status] This issue is important but the maintainers haven't started working on it\n[on Nov 27, 2025](https://github.com/google/adk-python/issues/3726#event-21203183794)\n[Sign up for free](https://github.com/signup?return_to=https://github.com/google/adk-python/issues/3726)**to join this conversation on GitHub.** Already have an account? [Sign in to comment](https://github.com/login?return_to=https://github.com/google/adk-python/issues/3726)\n## Metadata\n## Metadata\n### Assignees\n  * [![@surajksharma07](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)surajksharma07](https://github.com/surajksharma07)\n  * [![@wyf7107](https://avatars.githubusercontent.com/u/14008276?s=64&v=4)wyf7107](https://github.com/wyf7107)\n\n\n### Labels\n[models[Component] Issues related to model support](https://github.com/google/adk-python/issues?q=state%3Aopen%20label%3A%22models%22)[Component] Issues related to model support[need attention[Status] This issue is important but the maintainers haven't started working on it](https://github.com/google/adk-python/issues?q=state%3Aopen%20label%3A%22need%20attention%22)[Status] This issue is important but the maintainers haven't started working on it\n### Type\n[Bug](https://github.com/google/adk-python/issues?q=type:\"Bug\")\n### Projects\nNo projects\n### Milestone\nNo milestone\n### Relationships\nNone yet\n### Development\nCode with agent mode\nSelect code repository\nNo branches or pull requests\n### Participants\n[![@wyf7107](https://avatars.githubusercontent.com/u/14008276?s=64&v=4)](https://github.com/wyf7107)[![@Yashwant00CR7](https://avatars.githubusercontent.com/u/146008508?s=64&u=bcaf596a8cff7207f0941ee4b2b7190c7e045ecd&v=4)](https://github.com/Yashwant00CR7)[![@surajksharma07](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)](https://github.com/surajksharma07)\n## Issue actions\n## Footer\n[ ](https://github.com) ¬© 2025 GitHub, Inc. \n### Footer navigation\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Community](https://github.community/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\nOllama and Gemini Model Integration ¬∑ Issue #3726 ¬∑ google/adk-python\n\n\n"
                        }
                      }
                    },
                    {
                      "function_response": {
                        "id": "call_81397642",
                        "name": "batch_crawl_tool",
                        "response": {
                          "result": "# Content from https://github.com/google/adk-python\n\n[Skip to content](https://github.com/google/adk-python#start-of-content)\n## Navigation Menu\nToggle navigation\n[ ](https://github.com/)\n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python)\nAppearance settings\n  * Platform\n    * AI CODE CREATION\n      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)\n      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)\n      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)\n      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)\n    * DEVELOPER WORKFLOWS\n      * [ ActionsAutomate any workflow ](https://github.com/features/actions)\n      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)\n      * [ IssuesPlan and track work ](https://github.com/features/issues)\n      * [ Code ReviewManage code changes ](https://github.com/features/code-review)\n    * APPLICATION SECURITY\n      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)\n      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)\n      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)\n    * EXPLORE\n      * [Why GitHub](https://github.com/why-github)\n      * [Documentation](https://docs.github.com)\n      * [Blog](https://github.blog)\n      * [Changelog](https://github.blog/changelog)\n      * [Marketplace](https://github.com/marketplace)\n[View all features](https://github.com/features)\n  * Solutions\n    * BY COMPANY SIZE\n      * [Enterprises](https://github.com/enterprise)\n      * [Small and medium teams](https://github.com/team)\n      * [Startups](https://github.com/enterprise/startups)\n      * [Nonprofits](https://github.com/solutions/industry/nonprofits)\n    * BY USE CASE\n      * [App Modernization](https://github.com/solutions/use-case/app-modernization)\n      * [DevSecOps](https://github.com/solutions/use-case/devsecops)\n      * [DevOps](https://github.com/solutions/use-case/devops)\n      * [CI/CD](https://github.com/solutions/use-case/ci-cd)\n      * [View all use cases](https://github.com/solutions/use-case)\n    * BY INDUSTRY\n      * [Healthcare](https://github.com/solutions/industry/healthcare)\n      * [Financial services](https://github.com/solutions/industry/financial-services)\n      * [Manufacturing](https://github.com/solutions/industry/manufacturing)\n      * [Government](https://github.com/solutions/industry/government)\n      * [View all industries](https://github.com/solutions/industry)\n[View all solutions](https://github.com/solutions)\n  * Resources\n    * EXPLORE BY TOPIC\n      * [AI](https://github.com/resources/articles?topic=ai)\n      * [Software Development](https://github.com/resources/articles?topic=software-development)\n      * [DevOps](https://github.com/resources/articles?topic=devops)\n      * [Security](https://github.com/resources/articles?topic=security)\n      * [View all topics](https://github.com/resources/articles)\n    * EXPLORE BY TYPE\n      * [Customer stories](https://github.com/customer-stories)\n      * [Events & webinars](https://github.com/resources/events)\n      * [Ebooks & reports](https://github.com/resources/whitepapers)\n      * [Business insights](https://github.com/solutions/executive-insights)\n      * [GitHub Skills](https://skills.github.com)\n    * SUPPORT & SERVICES\n      * [Documentation](https://docs.github.com)\n      * [Customer support](https://support.github.com)\n      * [Community forum](https://github.com/orgs/community/discussions)\n      * [Trust center](https://github.com/trust-center)\n      * [Partners](https://github.com/partners)\n  * Open Source\n    * COMMUNITY\n      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)\n    * PROGRAMS\n      * [Security Lab](https://securitylab.github.com)\n      * [Maintainer Community](https://maintainers.github.com)\n      * [Accelerator](https://github.com/accelerator)\n      * [Archive Program](https://archiveprogram.github.com)\n    * REPOSITORIES\n      * [Topics](https://github.com/topics)\n      * [Trending](https://github.com/trending)\n      * [Collections](https://github.com/collections)\n  * Enterprise\n    * ENTERPRISE SOLUTIONS\n      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)\n    * AVAILABLE ADD-ONS\n      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)\n      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)\n      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)\n  * [Pricing](https://github.com/pricing)\n\n\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\nSearch \nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n#  Provide feedback \nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancel  Submit feedback \n#  Saved searches \n## Use saved searches to filter your results more quickly\nName\nQuery\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \nCancel  Create saved search \n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python)\n[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=google%2Fadk-python)\nAppearance settings\nResetting focus\nYou signed in with another tab or window. [Reload](https://github.com/google/adk-python) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/google/adk-python) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/google/adk-python) to refresh your session. Dismiss alert\n{{ message }}\n[ google ](https://github.com/google) / **[adk-python](https://github.com/google/adk-python) ** Public\n  * [ ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python) You must be signed in to change notification settings\n  * [ 2.5k ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n  * [ Star  15.7k ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n\n\nAn open-source, code-first Python toolkit for building, evaluating, and deploying sophisticated AI agents with flexibility and control. \n[google.github.io/adk-docs/](https://google.github.io/adk-docs/ \"https://google.github.io/adk-docs/\")\n### License\n[ ](https://github.com/google/adk-python/blob/main/LICENSE)\n[ 15.7k stars ](https://github.com/google/adk-python/stargazers) [ 2.5k forks ](https://github.com/google/adk-python/forks) [ Branches ](https://github.com/google/adk-python/branches) [ Tags ](https://github.com/google/adk-python/tags) [ Activity ](https://github.com/google/adk-python/activity)\n[ Star  ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n[ ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python) You must be signed in to change notification settings\n  * [ Code ](https://github.com/google/adk-python)\n  * [ Issues 354 ](https://github.com/google/adk-python/issues)\n  * [ Pull requests 102 ](https://github.com/google/adk-python/pulls)\n  * [ Discussions ](https://github.com/google/adk-python/discussions)\n  * [ Actions ](https://github.com/google/adk-python/actions)\n  * [ Projects 0 ](https://github.com/google/adk-python/projects)\n  * [ Security ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n### [ Uh oh!  ](https://github.com/google/adk-python/security)\n[There was an error while loading. ](https://github.com/google/adk-python/security)[Please reload this page](https://github.com/google/adk-python).\n  * [ Insights ](https://github.com/google/adk-python/pulse)\n\n\nAdditional navigation options\n  * [ Code  ](https://github.com/google/adk-python)\n  * [ Issues  ](https://github.com/google/adk-python/issues)\n  * [ Pull requests  ](https://github.com/google/adk-python/pulls)\n  * [ Discussions  ](https://github.com/google/adk-python/discussions)\n  * [ Actions  ](https://github.com/google/adk-python/actions)\n  * [ Projects  ](https://github.com/google/adk-python/projects)\n  * [ Security  ](https://github.com/google/adk-python/security)\n  * [ Insights  ](https://github.com/google/adk-python/pulse)\n\n\n# google/adk-python\nmain\n[Branches](https://github.com/google/adk-python/branches)[Tags](https://github.com/google/adk-python/tags)\n[](https://github.com/google/adk-python/branches)[](https://github.com/google/adk-python/tags)\nGo to file\nCode\nOpen more actions menu\n## Folders and files\nName | Name | Last commit message | Last commit date  \n---|---|---|---  \n## Latest commit\n## History\n[1,754 Commits](https://github.com/google/adk-python/commits/main/)[](https://github.com/google/adk-python/commits/main/)  \n[.gemini](https://github.com/google/adk-python/tree/main/.gemini \".gemini\") | [.gemini](https://github.com/google/adk-python/tree/main/.gemini \".gemini\") |  |   \n[.github](https://github.com/google/adk-python/tree/main/.github \".github\") | [.github](https://github.com/google/adk-python/tree/main/.github \".github\") |  |   \n[assets](https://github.com/google/adk-python/tree/main/assets \"assets\") | [assets](https://github.com/google/adk-python/tree/main/assets \"assets\") |  |   \n[contributing](https://github.com/google/adk-python/tree/main/contributing \"contributing\") | [contributing](https://github.com/google/adk-python/tree/main/contributing \"contributing\") |  |   \n[scripts](https://github.com/google/adk-python/tree/main/scripts \"scripts\") | [scripts](https://github.com/google/adk-python/tree/main/scripts \"scripts\") |  |   \n[src/google/adk](https://github.com/google/adk-python/tree/main/src/google/adk \"This path skips through empty directories\") | [src/google/adk](https://github.com/google/adk-python/tree/main/src/google/adk \"This path skips through empty directories\") |  |   \n[tests](https://github.com/google/adk-python/tree/main/tests \"tests\") | [tests](https://github.com/google/adk-python/tree/main/tests \"tests\") |  |   \n[.gitignore](https://github.com/google/adk-python/blob/main/.gitignore \".gitignore\") | [.gitignore](https://github.com/google/adk-python/blob/main/.gitignore \".gitignore\") |  |   \n[AGENTS.md](https://github.com/google/adk-python/blob/main/AGENTS.md \"AGENTS.md\") | [AGENTS.md](https://github.com/google/adk-python/blob/main/AGENTS.md \"AGENTS.md\") |  |   \n[CHANGELOG.md](https://github.com/google/adk-python/blob/main/CHANGELOG.md \"CHANGELOG.md\") | [CHANGELOG.md](https://github.com/google/adk-python/blob/main/CHANGELOG.md \"CHANGELOG.md\") |  |   \n[CONTRIBUTING.md](https://github.com/google/adk-python/blob/main/CONTRIBUTING.md \"CONTRIBUTING.md\") | [CONTRIBUTING.md](https://github.com/google/adk-python/blob/main/CONTRIBUTING.md \"CONTRIBUTING.md\") |  |   \n[LICENSE](https://github.com/google/adk-python/blob/main/LICENSE \"LICENSE\") | [LICENSE](https://github.com/google/adk-python/blob/main/LICENSE \"LICENSE\") |  |   \n[README.md](https://github.com/google/adk-python/blob/main/README.md \"README.md\") | [README.md](https://github.com/google/adk-python/blob/main/README.md \"README.md\") |  |   \n[autoformat.sh](https://github.com/google/adk-python/blob/main/autoformat.sh \"autoformat.sh\") | [autoformat.sh](https://github.com/google/adk-python/blob/main/autoformat.sh \"autoformat.sh\") |  |   \n[llms-full.txt](https://github.com/google/adk-python/blob/main/llms-full.txt \"llms-full.txt\") | [llms-full.txt](https://github.com/google/adk-python/blob/main/llms-full.txt \"llms-full.txt\") |  |   \n[llms.txt](https://github.com/google/adk-python/blob/main/llms.txt \"llms.txt\") | [llms.txt](https://github.com/google/adk-python/blob/main/llms.txt \"llms.txt\") |  |   \n[pylintrc](https://github.com/google/adk-python/blob/main/pylintrc \"pylintrc\") | [pylintrc](https://github.com/google/adk-python/blob/main/pylintrc \"pylintrc\") |  |   \n[pyproject.toml](https://github.com/google/adk-python/blob/main/pyproject.toml \"pyproject.toml\") | [pyproject.toml](https://github.com/google/adk-python/blob/main/pyproject.toml \"pyproject.toml\") |  |   \nView all files  \n## Repository files navigation\n  * [README](https://github.com/google/adk-python)\n  * [Code of conduct](https://github.com/google/adk-python)\n  * [Contributing](https://github.com/google/adk-python)\n  * [Apache-2.0 license](https://github.com/google/adk-python)\n  * [Security](https://github.com/google/adk-python)\n\n\n# Agent Development Kit (ADK)\n[](https://github.com/google/adk-python#agent-development-kit-adk)\n[![License](https://camo.githubusercontent.com/5b60841bea9e11d9d0b0950d690c9bc554e06385634056a7d5d62a15d1a4eabe/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4170616368655f322e302d626c75652e737667)](https://github.com/google/adk-python/blob/main/LICENSE) [![PyPI](https://camo.githubusercontent.com/831aae963ba63f223d13c586fc6b3f2b620cec90a438f1a09c43a6be1e8d5f22/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f676f6f676c652d61646b)](https://pypi.org/project/google-adk/) [![Python Unit Tests](https://github.com/google/adk-python/actions/workflows/python-unit-tests.yml/badge.svg)](https://github.com/google/adk-python/actions/workflows/python-unit-tests.yml) [![r/agentdevelopmentkit](https://camo.githubusercontent.com/804c84103b652f4f9ffcceb4914840adca00dfeec97b4fea152a38aaccc16225/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5265646469742d722532466167656e74646576656c6f706d656e746b69742d4646343530303f7374796c653d666c6174266c6f676f3d726564646974266c6f676f436f6c6f723d7768697465)](https://www.reddit.com/r/agentdevelopmentkit/) [![Ask Code Wiki](https://camo.githubusercontent.com/3002e59856dd402678cfd2c64e5f8154749cb8bfe99df56ba8486253c269f3c2/68747470733a2f2f7777772e677374617469632e636f6d2f5f2f626f712d73646c632d6167656e74732d75692f5f2f722f4d766f7367346b6c4341342e737667)](https://codewiki.google/github.com/google/adk-python)\n##  [![](https://raw.githubusercontent.com/google/adk-python/main/assets/agent-development-kit.png)](https://raw.githubusercontent.com/google/adk-python/main/assets/agent-development-kit.png)\n[](https://github.com/google/adk-python#----------)\n###  An open-source, code-first Python framework for building, evaluating, and deploying sophisticated AI agents with flexibility and control. \n[](https://github.com/google/adk-python#------an-open-source-code-first-python-framework-for-building-evaluating-and-deploying-sophisticated-ai-agents-with-flexibility-and-control----)\n###  Important Links: [Docs](https://google.github.io/adk-docs/), [Samples](https://github.com/google/adk-samples), [Java ADK](https://github.com/google/adk-java), [Go ADK](https://github.com/google/adk-go) & [ADK Web](https://github.com/google/adk-web). \n[](https://github.com/google/adk-python#------important-links------docs------samples------java-adk------go-adk-------adk-web----)\nAgent Development Kit (ADK) is a flexible and modular framework that applies software development principles to AI agent creation. It is designed to simplify building, deploying, and orchestrating agent workflows, from simple tasks to complex systems. While optimized for Gemini, ADK is model-agnostic, deployment-agnostic, and compatible with other frameworks.\n* * *\n## üî• What's new\n[](https://github.com/google/adk-python#-whats-new)\n  * **Custom Service Registration** : Add a service registry to provide a generic way to register custom service implementations to be used in FastAPI server. See [short instruction](https://github.com/google/adk-python/discussions/3175#discussioncomment-14745120). ([391628f](https://github.com/google/adk-python/commit/391628fcdc7b950c6835f64ae3ccab197163c990))\n  * **Rewind** : Add the ability to rewind a session to before a previous invocation ([9dce06f](https://github.com/google/adk-python/commit/9dce06f9b00259ec42241df4f6638955e783a9d1)).\n  * **New CodeExecutor** : Introduces a new AgentEngineSandboxCodeExecutor class that supports executing agent-generated code using the Vertex AI Code Execution Sandbox API ([ee39a89](https://github.com/google/adk-python/commit/ee39a891106316b790621795b5cc529e89815a98))\n\n\n## ‚ú® Key Features\n[](https://github.com/google/adk-python#-key-features)\n  * **Rich Tool Ecosystem** : Utilize pre-built tools, custom functions, OpenAPI specs, MCP tools or integrate existing tools to give agents diverse capabilities, all for tight integration with the Google ecosystem.\n  * **Code-First Development** : Define agent logic, tools, and orchestration directly in Python for ultimate flexibility, testability, and versioning.\n  * **Agent Config** : Build agents without code. Check out the [Agent Config](https://google.github.io/adk-docs/agents/config/) feature.\n  * **Tool Confirmation** : A [tool confirmation flow(HITL)](https://google.github.io/adk-docs/tools/confirmation/) that can guard tool execution with explicit confirmation and custom input.\n  * **Modular Multi-Agent Systems** : Design scalable applications by composing multiple specialized agents into flexible hierarchies.\n  * **Deploy Anywhere** : Easily containerize and deploy agents on Cloud Run or scale seamlessly with Vertex AI Agent Engine.\n\n\n## üöÄ Installation\n[](https://github.com/google/adk-python#-installation)\n### Stable Release (Recommended)\n[](https://github.com/google/adk-python#stable-release-recommended)\nYou can install the latest stable version of ADK using `pip`:\n```\npip install google-adk\n```\n\nThe release cadence is roughly bi-weekly.\nThis version is recommended for most users as it represents the most recent official release.\n### Development Version\n[](https://github.com/google/adk-python#development-version)\nBug fixes and new features are merged into the main branch on GitHub first. If you need access to changes that haven't been included in an official PyPI release yet, you can install directly from the main branch:\n```\npip install git+https://github.com/google/adk-python.git@main\n```\n\nNote: The development version is built directly from the latest code commits. While it includes the newest fixes and features, it may also contain experimental changes or bugs not present in the stable release. Use it primarily for testing upcoming changes or accessing critical fixes before they are officially released.\n## ü§ñ Agent2Agent (A2A) Protocol and ADK Integration\n[](https://github.com/google/adk-python#-agent2agent-a2a-protocol-and-adk-integration)\nFor remote agent-to-agent communication, ADK integrates with the [A2A protocol](https://github.com/google-a2a/A2A/). See this [example](https://github.com/a2aproject/a2a-samples/tree/main/samples/python/agents) for how they can work together.\n## üìö Documentation\n[](https://github.com/google/adk-python#-documentation)\nExplore the full documentation for detailed guides on building, evaluating, and deploying agents:\n  * **[Documentation](https://google.github.io/adk-docs)**\n\n\n## üèÅ Feature Highlight\n[](https://github.com/google/adk-python#-feature-highlight)\n### Define a single agent:\n[](https://github.com/google/adk-python#define-a-single-agent)\n```\nfrom google.adk.agents import Agent\nfrom google.adk.tools import google_search\n\nroot_agent = Agent(\n    name=\"search_assistant\",\n    model=\"gemini-2.5-flash\", # Or your preferred Gemini model\n    instruction=\"You are a helpful assistant. Answer user questions using Google Search when needed.\",\n    description=\"An assistant that can search the web.\",\n    tools=[google_search]\n)\n```\n\n### Define a multi-agent system:\n[](https://github.com/google/adk-python#define-a-multi-agent-system)\nDefine a multi-agent system with coordinator agent, greeter agent, and task execution agent. Then ADK engine and the model will guide the agents works together to accomplish the task.\n```\nfrom google.adk.agents import LlmAgent, BaseAgent\n\n# Define individual agents\ngreeter = LlmAgent(name=\"greeter\", model=\"gemini-2.5-flash\", ...)\ntask_executor = LlmAgent(name=\"task_executor\", model=\"gemini-2.5-flash\", ...)\n\n# Create parent agent and assign children via sub_agents\ncoordinator = LlmAgent(\n    name=\"Coordinator\",\n    model=\"gemini-2.5-flash\",\n    description=\"I coordinate greetings and tasks.\",\n    sub_agents=[ # Assign sub_agents here\n        greeter,\n        task_executor\n    ]\n)\n```\n\n### Development UI\n[](https://github.com/google/adk-python#development-ui)\nA built-in development UI to help you test, evaluate, debug, and showcase your agent(s).\n[![](https://raw.githubusercontent.com/google/adk-python/main/assets/adk-web-dev-ui-function-call.png)](https://raw.githubusercontent.com/google/adk-python/main/assets/adk-web-dev-ui-function-call.png)\n### Evaluate Agents\n[](https://github.com/google/adk-python#evaluate-agents)\n```\nadk eval \\\n    samples_for_testing/hello_world \\\n    samples_for_testing/hello_world/hello_world_eval_set_001.evalset.json\n```\n\n## ü§ù Contributing\n[](https://github.com/google/adk-python#-contributing)\nWe welcome contributions from the community! Whether it's bug reports, feature requests, documentation improvements, or code contributions, please see our\n  * [General contribution guideline and flow](https://google.github.io/adk-docs/contributing-guide/).\n  * Then if you want to contribute code, please read [Code Contributing Guidelines](https://github.com/google/adk-python/blob/main/CONTRIBUTING.md) to get started.\n\n\n## Community Repo\n[](https://github.com/google/adk-python#community-repo)\nWe have [adk-python-community repo](https://github.com/google/adk-python-community)that is home to a growing ecosystem of community-contributed tools, third-party service integrations, and deployment scripts that extend the core capabilities of the ADK.\n## Vibe Coding\n[](https://github.com/google/adk-python#vibe-coding)\nIf you are to develop agent via vibe coding the [llms.txt](https://github.com/google/adk-python/blob/main/llms.txt) and the [llms-full.txt](https://github.com/google/adk-python/blob/main/llms-full.txt) can be used as context to LLM. While the former one is a summarized one and the later one has the full information in case your LLM has big enough context window.\n## Community Events\n[](https://github.com/google/adk-python#community-events)\n  * [Completed] ADK's 1st community meeting on Wednesday, October 15, 2025. Remember to [join our group](https://groups.google.com/g/adk-community) to get access to the [recording](https://drive.google.com/file/d/1rpXDq5NSH8-MyMeYI6_5pZ3Lhn0X9BQf/view), and [deck](https://docs.google.com/presentation/d/1_b8LG4xaiadbUUDzyNiapSFyxanc9ZgFdw7JQ6zmZ9Q/edit?slide=id.g384e60cdaca_0_658&resourcekey=0-tjFFv0VBQhpXBPCkZr0NOg#slide=id.g384e60cdaca_0_658).\n\n\n## üìÑ License\n[](https://github.com/google/adk-python#-license)\nThis project is licensed under the Apache 2.0 License - see the [LICENSE](https://github.com/google/adk-python/blob/main/LICENSE) file for details.\n* * *\n_Happy Agent Building!_\n## About\nAn open-source, code-first Python toolkit for building, evaluating, and deploying sophisticated AI agents with flexibility and control. \n[google.github.io/adk-docs/](https://google.github.io/adk-docs/ \"https://google.github.io/adk-docs/\")\n### Topics\n[ agent ](https://github.com/topics/agent \"Topic: agent\") [ ai ](https://github.com/topics/ai \"Topic: ai\") [ multi-agent ](https://github.com/topics/multi-agent \"Topic: multi-agent\") [ agents ](https://github.com/topics/agents \"Topic: agents\") [ multi-agent-systems ](https://github.com/topics/multi-agent-systems \"Topic: multi-agent-systems\") [ ai-agents ](https://github.com/topics/ai-agents \"Topic: ai-agents\") [ multi-agents ](https://github.com/topics/multi-agents \"Topic: multi-agents\") [ llm ](https://github.com/topics/llm \"Topic: llm\") [ llms ](https://github.com/topics/llms \"Topic: llms\") [ genai ](https://github.com/topics/genai \"Topic: genai\") [ agentic ](https://github.com/topics/agentic \"Topic: agentic\") [ genai-chatbot ](https://github.com/topics/genai-chatbot \"Topic: genai-chatbot\") [ agentic-ai ](https://github.com/topics/agentic-ai \"Topic: agentic-ai\") [ multi-agents-collaboration ](https://github.com/topics/multi-agents-collaboration \"Topic: multi-agents-collaboration\") [ aiagentframework ](https://github.com/topics/aiagentframework \"Topic: aiagentframework\") [ agents-sdk ](https://github.com/topics/agents-sdk \"Topic: agents-sdk\")\n### Resources\n[ ](https://github.com/google/adk-python#readme-ov-file)\n### License\n[ ](https://github.com/google/adk-python#Apache-2.0-1-ov-file)\n### Code of conduct\n[ ](https://github.com/google/adk-python#coc-ov-file)\n### Contributing\n[ ](https://github.com/google/adk-python#contributing-ov-file)\n### Security policy\n[ ](https://github.com/google/adk-python#security-ov-file)\n###  Uh oh! \nThere was an error while loading. [Please reload this page](https://github.com/google/adk-python).\n[Activity](https://github.com/google/adk-python/activity)\n[Custom properties](https://github.com/google/adk-python/custom-properties)\n### Stars\n[**15.7k** stars](https://github.com/google/adk-python/stargazers)\n### Watchers\n[**137** watching](https://github.com/google/adk-python/watchers)\n### Forks\n[**2.5k** forks](https://github.com/google/adk-python/forks)\n[ Report repository ](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python&report=google+%28user%29)\n##  [Releases 30](https://github.com/google/adk-python/releases)\n[ 1.19.0 Latest  Nov 20, 2025 ](https://github.com/google/adk-python/releases/tag/v1.19.0)\n[+ 29 releases](https://github.com/google/adk-python/releases)\n##  [Packages 0](https://github.com/orgs/google/packages?repo_name=adk-python)\nNo packages published   \n\n##  [Used by 2.8k](https://github.com/google/adk-python/network/dependents)\n[\n  * ![@WRLDInc](https://avatars.githubusercontent.com/u/56140573?s=64&v=4)\n  * ![@Klavis-AI](https://avatars.githubusercontent.com/u/205720652?s=64&v=4)\n  * ![@restatedev](https://avatars.githubusercontent.com/u/97341811?s=64&v=4)\n  * ![@Devvekariya711](https://avatars.githubusercontent.com/u/207506349?s=64&v=4)\n  * ![@Jineshkumar1](https://avatars.githubusercontent.com/u/85137150?s=64&v=4)\n  * ![@nextlinktechnology](https://avatars.githubusercontent.com/u/60595633?s=64&v=4)\n  * ![@abdulrahman305](https://avatars.githubusercontent.com/u/131770526?s=64&v=4)\n  * ![@Langdock](https://avatars.githubusercontent.com/u/136317085?s=64&v=4)\n\n+ 2,819  ](https://github.com/google/adk-python/network/dependents)\n##  [Contributors 206](https://github.com/google/adk-python/graphs/contributors)\n  * [ ![@seanzhougoogle](https://avatars.githubusercontent.com/u/69162095?s=64&v=4) ](https://github.com/seanzhougoogle)\n  * [ ![@google-genai-bot](https://avatars.githubusercontent.com/u/194307901?s=64&v=4) ](https://github.com/google-genai-bot)\n  * [ ![@hangfei](https://avatars.githubusercontent.com/u/5482153?s=64&v=4) ](https://github.com/hangfei)\n  * [ ![@Jacksunwei](https://avatars.githubusercontent.com/u/1281348?s=64&v=4) ](https://github.com/Jacksunwei)\n  * [ ![@DeanChensj](https://avatars.githubusercontent.com/u/9414763?s=64&v=4) ](https://github.com/DeanChensj)\n  * [ ![@xuanyang15](https://avatars.githubusercontent.com/u/13991296?s=64&v=4) ](https://github.com/xuanyang15)\n  * [ ![@GWeale](https://avatars.githubusercontent.com/u/51099682?s=64&v=4) ](https://github.com/GWeale)\n  * [ ![@ankursharmas](https://avatars.githubusercontent.com/u/5462261?s=64&v=4) ](https://github.com/ankursharmas)\n  * [ ![@wuliang229](https://avatars.githubusercontent.com/u/18244712?s=64&v=4) ](https://github.com/wuliang229)\n  * [ ![@wyf7107](https://avatars.githubusercontent.com/u/14008276?s=64&v=4) ](https://github.com/wyf7107)\n  * [ ![@selcukgun](https://avatars.githubusercontent.com/u/5055758?s=64&v=4) ](https://github.com/selcukgun)\n  * [ ![@wukath](https://avatars.githubusercontent.com/u/108756731?s=64&v=4) ](https://github.com/wukath)\n  * [ ![@copybara-github](https://avatars.githubusercontent.com/u/32201506?s=64&v=4) ](https://github.com/copybara-github)\n  * [ ![@XinranTang](https://avatars.githubusercontent.com/u/33537857?s=64&v=4) ](https://github.com/XinranTang)\n\n\n[+ 192 contributors](https://github.com/google/adk-python/graphs/contributors)\n## Languages\n  * [ Python 94.8% ](https://github.com/google/adk-python/search?l=python)\n  * [ Jupyter Notebook 4.3% ](https://github.com/google/adk-python/search?l=jupyter-notebook)\n  * Other 0.9%\n\n\n## Footer\n[ ](https://github.com) ¬© 2025 GitHub, Inc. \n### Footer navigation\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Community](https://github.community/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\n\n\n"
                        }
                      }
                    },
                    {
                      "function_response": {
                        "id": "call_89754013",
                        "name": "adaptive_crawl_tool",
                        "response": {
                          "result": "# Adaptive Result from https://github.com/google/adk-python\n\n[Skip to content](https://github.com/google/adk-python#start-of-content)\n## Navigation Menu\nToggle navigation\n[ ](https://github.com/)\n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python)\nAppearance settings\n  * Platform\n    * AI CODE CREATION\n      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)\n      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)\n      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)\n      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)\n    * DEVELOPER WORKFLOWS\n      * [ ActionsAutomate any workflow ](https://github.com/features/actions)\n      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)\n      * [ IssuesPlan and track work ](https://github.com/features/issues)\n      * [ Code ReviewManage code changes ](https://github.com/features/code-review)\n    * APPLICATION SECURITY\n      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)\n      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)\n      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)\n    * EXPLORE\n      * [Why GitHub](https://github.com/why-github)\n      * [Documentation](https://docs.github.com)\n      * [Blog](https://github.blog)\n      * [Changelog](https://github.blog/changelog)\n      * [Marketplace](https://github.com/marketplace)\n[View all features](https://github.com/features)\n  * Solutions\n    * BY COMPANY SIZE\n      * [Enterprises](https://github.com/enterprise)\n      * [Small and medium teams](https://github.com/team)\n      * [Startups](https://github.com/enterprise/startups)\n      * [Nonprofits](https://github.com/solutions/industry/nonprofits)\n    * BY USE CASE\n      * [App Modernization](https://github.com/solutions/use-case/app-modernization)\n      * [DevSecOps](https://github.com/solutions/use-case/devsecops)\n      * [DevOps](https://github.com/solutions/use-case/devops)\n      * [CI/CD](https://github.com/solutions/use-case/ci-cd)\n      * [View all use cases](https://github.com/solutions/use-case)\n    * BY INDUSTRY\n      * [Healthcare](https://github.com/solutions/industry/healthcare)\n      * [Financial services](https://github.com/solutions/industry/financial-services)\n      * [Manufacturing](https://github.com/solutions/industry/manufacturing)\n      * [Government](https://github.com/solutions/industry/government)\n      * [View all industries](https://github.com/solutions/industry)\n[View all solutions](https://github.com/solutions)\n  * Resources\n    * EXPLORE BY TOPIC\n      * [AI](https://github.com/resources/articles?topic=ai)\n      * [Software Development](https://github.com/resources/articles?topic=software-development)\n      * [DevOps](https://github.com/resources/articles?topic=devops)\n      * [Security](https://github.com/resources/articles?topic=security)\n      * [View all topics](https://github.com/resources/articles)\n    * EXPLORE BY TYPE\n      * [Customer stories](https://github.com/customer-stories)\n      * [Events & webinars](https://github.com/resources/events)\n      * [Ebooks & reports](https://github.com/resources/whitepapers)\n      * [Business insights](https://github.com/solutions/executive-insights)\n      * [GitHub Skills](https://skills.github.com)\n    * SUPPORT & SERVICES\n      * [Documentation](https://docs.github.com)\n      * [Customer support](https://support.github.com)\n      * [Community forum](https://github.com/orgs/community/discussions)\n      * [Trust center](https://github.com/trust-center)\n      * [Partners](https://github.com/partners)\n  * Open Source\n    * COMMUNITY\n      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)\n    * PROGRAMS\n      * [Security Lab](https://securitylab.github.com)\n      * [Maintainer Community](https://maintainers.github.com)\n      * [Accelerator](https://github.com/accelerator)\n      * [Archive Program](https://archiveprogram.github.com)\n    * REPOSITORIES\n      * [Topics](https://github.com/topics)\n      * [Trending](https://github.com/trending)\n      * [Collections](https://github.com/collections)\n  * Enterprise\n    * ENTERPRISE SOLUTIONS\n      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)\n    * AVAILABLE ADD-ONS\n      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)\n      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)\n      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)\n  * [Pricing](https://github.com/pricing)\n\n\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\nSearch \nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n#  Provide feedback \nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancel  Submit feedback \n#  Saved searches \n## Use saved searches to filter your results more quickly\nName\nQuery\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \nCancel  Create saved search \n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python)\n[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=google%2Fadk-python)\nAppearance settings\nResetting focus\nYou signed in with another tab or window. [Reload](https://github.com/google/adk-python) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/google/adk-python) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/google/adk-python) to refresh your session. Dismiss alert\n{{ message }}\n[ google ](https://github.com/google) / **[adk-python](https://github.com/google/adk-python) ** Public\n  * [ ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python) You must be signed in to change notification settings\n  * [ 2.5k ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n  * [ Star  15.7k ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n\n\nAn open-source, code-first Python toolkit for building, evaluating, and deploying sophisticated AI agents with flexibility and control. \n[google.github.io/adk-docs/](https://google.github.io/adk-docs/ \"https://google.github.io/adk-docs/\")\n### License\n[ ](https://github.com/google/adk-python/blob/main/LICENSE)\n[ 15.7k stars ](https://github.com/google/adk-python/stargazers) [ 2.5k forks ](https://github.com/google/adk-python/forks) [ Branches ](https://github.com/google/adk-python/branches) [ Tags ](https://github.com/google/adk-python/tags) [ Activity ](https://github.com/google/adk-python/activity)\n[ Star  ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n[ ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python) You must be signed in to change notification settings\n  * [ Code ](https://github.com/google/adk-python)\n  * [ Issues 354 ](https://github.com/google/adk-python/issues)\n  * [ Pull requests 102 ](https://github.com/google/adk-python/pulls)\n  * [ Discussions ](https://github.com/google/adk-python/discussions)\n  * [ Actions ](https://github.com/google/adk-python/actions)\n  * [ Projects 0 ](https://github.com/google/adk-python/projects)\n  * [ Security ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n### [ Uh oh!  ](https://github.com/google/adk-python/security)\n[There was an error while loading. ](https://github.com/google/adk-python/security)[Please reload this page](https://github.com/google/adk-python).\n  * [ Insights ](https://github.com/google/adk-python/pulse)\n\n\nAdditional navigation options\n  * [ Code  ](https://github.com/google/adk-python)\n  * [ Issues  ](https://github.com/google/adk-python/issues)\n  * [ Pull requests  ](https://github.com/google/adk-python/pulls)\n  * [ Discussions  ](https://github.com/google/adk-python/discussions)\n  * [ Actions  ](https://github.com/google/adk-python/actions)\n  * [ Projects  ](https://github.com/google/adk-python/projects)\n  * [ Security  ](https://github.com/google/adk-python/security)\n  * [ Insights  ](https://github.com/google/adk-python/pulse)\n\n\n# google/adk-python\nmain\n[Branches](https://github.com/google/adk-python/branches)[Tags](https://github.com/google/adk-python/tags)\n[](https://github.com/google/adk-python/branches)[](https://github.com/google/adk-python/tags)\nGo to file\nCode\nOpen more actions menu\n## Folders and files\nName | Name | Last commit message | Last commit date  \n---|---|---|---  \n## Latest commit\n## History\n[1,754 Commits](https://github.com/google/adk-python/commits/main/)[](https://github.com/google/adk-python/commits/main/)  \n[.gemini](https://github.com/google/adk-python/tree/main/.gemini \".gemini\") | [.gemini](https://github.com/google/adk-python/tree/main/.gemini \".gemini\") |  |   \n[.github](https://github.com/google/adk-python/tree/main/.github \".github\") | [.github](https://github.com/google/adk-python/tree/main/.github \".github\") |  |   \n[assets](https://github.com/google/adk-python/tree/main/assets \"assets\") | [assets](https://github.com/google/adk-python/tree/main/assets \"assets\") |  |   \n[contributing](https://github.com/google/adk-python/tree/main/contributing \"contributing\") | [contributing](https://github.com/google/adk-python/tree/main/contributing \"contributing\") |  |   \n[scripts](https://github.com/google/adk-python/tree/main/scripts \"scripts\") | [scripts](https://github.com/google/adk-python/tree/main/scripts \"scripts\") |  |   \n[src/google/adk](https://github.com/google/adk-python/tree/main/src/google/adk \"This path skips through empty directories\") | [src/google/adk](https://github.com/google/adk-python/tree/main/src/google/adk \"This path skips through empty directories\") |  |   \n[tests](https://github.com/google/adk-python/tree/main/tests \"tests\") | [tests](https://github.com/google/adk-python/tree/main/tests \"tests\") |  |   \n[.gitignore](https://github.com/google/adk-python/blob/main/.gitignore \".gitignore\") | [.gitignore](https://github.com/google/adk-python/blob/main/.gitignore \".gitignore\") |  |   \n[AGENTS.md](https://github.com/google/adk-python/blob/main/AGENTS.md \"AGENTS.md\") | [AGENTS.md](https://github.com/google/adk-python/blob/main/AGENTS.md \"AGENTS.md\") |  |   \n[CHANGELOG.md](https://github.com/google/adk-python/blob/main/CHANGELOG.md \"CHANGELOG.md\") | [CHANGELOG.md](https://github.com/google/adk-python/blob/main/CHANGELOG.md \"CHANGELOG.md\") |  |   \n[CONTRIBUTING.md](https://github.com/google/adk-python/blob/main/CONTRIBUTING.md \"CONTRIBUTING.md\") | [CONTRIBUTING.md](https://github.com/google/adk-python/blob/main/CONTRIBUTING.md \"CONTRIBUTING.md\") |  |   \n[LICENSE](https://github.com/google/adk-python/blob/main/LICENSE \"LICENSE\") | [LICENSE](https://github.com/google/adk-python/blob/main/LICENSE \"LICENSE\") |  |   \n[README.md](https://github.com/google/adk-python/blob/main/README.md \"README.md\") | [README.md](https://github.com/google/adk-python/blob/main/README.md \"README.md\") |  |   \n[autoformat.sh](https://github.com/google/adk-python/blob/main/autoformat.sh \"autoformat.sh\") | [autoformat.sh](https://github.com/google/adk-python/blob/main/autoformat.sh \"autoformat.sh\") |  |   \n[llms-full.txt](https://github.com/google/adk-python/blob/main/llms-full.txt \"llms-full.txt\") | [llms-full.txt](https://github.com/google/adk-python/blob/main/llms-full.txt \"llms-full.txt\") |  |   \n[llms.txt](https://github.com/google/adk-python/blob/main/llms.txt \"llms.txt\") | [llms.txt](https://github.com/google/adk-python/blob/main/llms.txt \"llms.txt\") |  |   \n[pylintrc](https://github.com/google/adk-python/blob/main/pylintrc \"pylintrc\") | [pylintrc](https://github.com/google/adk-python/blob/main/pylintrc \"pylintrc\") |  |   \n[pyproject.toml](https://github.com/google/adk-python/blob/main/pyproject.toml \"pyproject.toml\") | [pyproject.toml](https://github.com/google/adk-python/blob/main/pyproject.toml \"pyproject.toml\") |  |   \nView all files  \n## Repository files navigation\n  * [README](https://github.com/google/adk-python)\n  * [Code of conduct](https://github.com/google/adk-python)\n  * [Contributing](https://github.com/google/adk-python)\n  * [Apache-2.0 license](https://github.com/google/adk-python)\n  * [Security](https://github.com/google/adk-python)\n\n\n# Agent Development Kit (ADK)\n[](https://github.com/google/adk-python#agent-development-kit-adk)\n[![License](https://camo.githubusercontent.com/5b60841bea9e11d9d0b0950d690c9bc554e06385634056a7d5d62a15d1a4eabe/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4170616368655f322e302d626c75652e737667)](https://github.com/google/adk-python/blob/main/LICENSE) [![PyPI](https://camo.githubusercontent.com/831aae963ba63f223d13c586fc6b3f2b620cec90a438f1a09c43a6be1e8d5f22/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f676f6f676c652d61646b)](https://pypi.org/project/google-adk/) [![Python Unit Tests](https://github.com/google/adk-python/actions/workflows/python-unit-tests.yml/badge.svg)](https://github.com/google/adk-python/actions/workflows/python-unit-tests.yml) [![r/agentdevelopmentkit](https://camo.githubusercontent.com/804c84103b652f4f9ffcceb4914840adca00dfeec97b4fea152a38aaccc16225/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5265646469742d722532466167656e74646576656c6f706d656e746b69742d4646343530303f7374796c653d666c6174266c6f676f3d726564646974266c6f676f436f6c6f723d7768697465)](https://www.reddit.com/r/agentdevelopmentkit/) [![Ask Code Wiki](https://camo.githubusercontent.com/3002e59856dd402678cfd2c64e5f8154749cb8bfe99df56ba8486253c269f3c2/68747470733a2f2f7777772e677374617469632e636f6d2f5f2f626f712d73646c632d6167656e74732d75692f5f2f722f4d766f7367346b6c4341342e737667)](https://codewiki.google/github.com/google/adk-python)\n##  [![](https://raw.githubusercontent.com/google/adk-python/main/assets/agent-development-kit.png)](https://raw.githubusercontent.com/google/adk-python/main/assets/agent-development-kit.png)\n[](https://github.com/google/adk-python#----------)\n###  An open-source, code-first Python framework for building, evaluating, and deploying sophisticated AI agents with flexibility and control. \n[](https://github.com/google/adk-python#------an-open-source-code-first-python-framework-for-building-evaluating-and-deploying-sophisticated-ai-agents-with-flexibility-and-control----)\n###  Important Links: [Docs](https://google.github.io/adk-docs/), [Samples](https://github.com/google/adk-samples), [Java ADK](https://github.com/google/adk-java), [Go ADK](https://github.com/google/adk-go) & [ADK Web](https://github.com/google/adk-web). \n[](https://github.com/google/adk-python#------important-links------docs------samples------java-adk------go-adk-------adk-web----)\nAgent Development Kit (ADK) is a flexible and modular framework that applies software development principles to AI agent creation. It is designed to simplify building, deploying, and orchestrating agent workflows, from simple tasks to complex systems. While optimized for Gemini, ADK is model-agnostic, deployment-agnostic, and compatible with other frameworks.\n* * *\n## üî• What's new\n[](https://github.com/google/adk-python#-whats-new)\n  * **Custom Service Registration** : Add a service registry to provide a generic way to register custom service implementations to be used in FastAPI server. See [short instruction](https://github.com/google/adk-python/discussions/3175#discussioncomment-14745120). ([391628f](https://github.com/google/adk-python/commit/391628fcdc7b950c6835f64ae3ccab197163c990))\n  * **Rewind** : Add the ability to rewind a session to before a previous invocation ([9dce06f](https://github.com/google/adk-python/commit/9dce06f9b00259ec42241df4f6638955e783a9d1)).\n  * **New CodeExecutor** : Introduces a new AgentEngineSandboxCodeExecutor class that supports executing agent-generated code using the Vertex AI Code Execution Sandbox API ([ee39a89](https://github.com/google/adk-python/commit/ee39a891106316b790621795b5cc529e89815a98))\n\n\n## ‚ú® Key Features\n[](https://github.com/google/adk-python#-key-features)\n  * **Rich Tool Ecosystem** : Utilize pre-built tools, custom functions, OpenAPI specs, MCP tools or integrate existing tools to give agents diverse capabilities, all for tight integration with the Google ecosystem.\n  * **Code-First Development** : Define agent logic, tools, and orchestration directly in Python for ultimate flexibility, testability, and versioning.\n  * **Agent Config** : Build agents without code. Check out the [Agent Config](https://google.github.io/adk-docs/agents/config/) feature.\n  * **Tool Confirmation** : A [tool confirmation flow(HITL)](https://google.github.io/adk-docs/tools/confirmation/) that can guard tool execution with explicit confirmation and custom input.\n  * **Modular Multi-Agent Systems** : Design scalable applications by composing multiple specialized agents into flexible hierarchies.\n  * **Deploy Anywhere** : Easily containerize and deploy agents on Cloud Run or scale seamlessly with Vertex AI Agent Engine.\n\n\n## üöÄ Installation\n[](https://github.com/google/adk-python#-installation)\n### Stable Release (Recommended)\n[](https://github.com/google/adk-python#stable-release-recommended)\nYou can install the latest stable version of ADK using `pip`:\n```\npip install google-adk\n```\n\nThe release cadence is roughly bi-weekly.\nThis version is recommended for most users as it represents the most recent official release.\n### Development Version\n[](https://github.com/google/adk-python#development-version)\nBug fixes and new features are merged into the main branch on GitHub first. If you need access to changes that haven't been included in an official PyPI release yet, you can install directly from the main branch:\n```\npip install git+https://github.com/google/adk-python.git@main\n```\n\nNote: The development version is built directly from the latest code commits. While it includes the newest fixes and features, it may also contain experimental changes or bugs not present in the stable release. Use it primarily for testing upcoming changes or accessing critical fixes before they are officially released.\n## ü§ñ Agent2Agent (A2A) Protocol and ADK Integration\n[](https://github.com/google/adk-python#-agent2agent-a2a-protocol-and-adk-integration)\nFor remote agent-to-agent communication, ADK integrates with the [A2A protocol](https://github.com/google-a2a/A2A/). See this [example](https://github.com/a2aproject/a2a-samples/tree/main/samples/python/agents) for how they can work together.\n## üìö Documentation\n[](https://github.com/google/adk-python#-documentation)\nExplore the full documentation for detailed guides on building, evaluating, and deploying agents:\n  * **[Documentation](https://google.github.io/adk-docs)**\n\n\n## üèÅ Feature Highlight\n[](https://github.com/google/adk-python#-feature-highlight)\n### Define a single agent:\n[](https://github.com/google/adk-python#define-a-single-agent)\n```\nfrom google.adk.agents import Agent\nfrom google.adk.tools import google_search\n\nroot_agent = Agent(\n    name=\"search_assistant\",\n    model=\"gemini-2.5-flash\", # Or your preferred Gemini model\n    instruction=\"You are a helpful assistant. Answer user questions using Google Search when needed.\",\n    description=\"An assistant that can search the web.\",\n    tools=[google_search]\n)\n```\n\n### Define a multi-agent system:\n[](https://github.com/google/adk-python#define-a-multi-agent-system)\nDefine a multi-agent system with coordinator agent, greeter agent, and task execution agent. Then ADK engine and the model will guide the agents works together to accomplish the task.\n```\nfrom google.adk.agents import LlmAgent, BaseAgent\n\n# Define individual agents\ngreeter = LlmAgent(name=\"greeter\", model=\"gemini-2.5-flash\", ...)\ntask_executor = LlmAgent(name=\"task_executor\", model=\"gemini-2.5-flash\", ...)\n\n# Create parent agent and assign children via sub_agents\ncoordinator = LlmAgent(\n    name=\"Coordinator\",\n    model=\"gemini-2.5-flash\",\n    description=\"I coordinate greetings and tasks.\",\n    sub_agents=[ # Assign sub_agents here\n        greeter,\n        task_executor\n    ]\n)\n```\n\n### Development UI\n[](https://github.com/google/adk-python#development-ui)\nA built-in development UI to help you test, evaluate, debug, and showcase your agent(s).\n[![](https://raw.githubusercontent.com/google/adk-python/main/assets/adk-web-dev-ui-function-call.png)](https://raw.githubusercontent.com/google/adk-python/main/assets/adk-web-dev-ui-function-call.png)\n### Evaluate Agents\n[](https://github.com/google/adk-python#evaluate-agents)\n```\nadk eval \\\n    samples_for_testing/hello_world \\\n    samples_for_testing/hello_world/hello_world_eval_set_001.evalset.json\n```\n\n## ü§ù Contributing\n[](https://github.com/google/adk-python#-contributing)\nWe welcome contributions from the community! Whether it's bug reports, feature requests, documentation improvements, or code contributions, please see our\n  * [General contribution guideline and flow](https://google.github.io/adk-docs/contributing-guide/).\n  * Then if you want to contribute code, please read [Code Contributing Guidelines](https://github.com/google/adk-python/blob/main/CONTRIBUTING.md) to get started.\n\n\n## Community Repo\n[](https://github.com/google/adk-python#community-repo)\nWe have [adk-python-community repo](https://github.com/google/adk-python-community)that is home to a growing ecosystem of community-contributed tools, third-party service integrations, and deployment scripts that extend the core capabilities of the ADK.\n## Vibe Coding\n[](https://github.com/google/adk-python#vibe-coding)\nIf you are to develop agent via vibe coding the [llms.txt](https://github.com/google/adk-python/blob/main/llms.txt) and the [llms-full.txt](https://github.com/google/adk-python/blob/main/llms-full.txt) can be used as context to LLM. While the former one is a summarized one and the later one has the full information in case your LLM has big enough context window.\n## Community Events\n[](https://github.com/google/adk-python#community-events)\n  * [Completed] ADK's 1st community meeting on Wednesday, October 15, 2025. Remember to [join our group](https://groups.google.com/g/adk-community) to get access to the [recording](https://drive.google.com/file/d/1rpXDq5NSH8-MyMeYI6_5pZ3Lhn0X9BQf/view), and [deck](https://docs.google.com/presentation/d/1_b8LG4xaiadbUUDzyNiapSFyxanc9ZgFdw7JQ6zmZ9Q/edit?slide=id.g384e60cdaca_0_658&resourcekey=0-tjFFv0VBQhpXBPCkZr0NOg#slide=id.g384e60cdaca_0_658).\n\n\n## üìÑ License\n[](https://github.com/google/adk-python#-license)\nThis project is licensed under the Apache 2.0 License - see the [LICENSE](https://github.com/google/adk-python/blob/main/LICENSE) file for details.\n* * *\n_Happy Agent Building!_\n## About\nAn open-source, code-first Python toolkit for building, evaluating, and deploying sophisticated AI agents with flexibility and control. \n[google.github.io/adk-docs/](https://google.github.io/adk-docs/ \"https://google.github.io/adk-docs/\")\n### Topics\n[ agent ](https://github.com/topics/agent \"Topic: agent\") [ ai ](https://github.com/topics/ai \"Topic: ai\") [ multi-agent ](https://github.com/topics/multi-agent \"Topic: multi-agent\") [ agents ](https://github.com/topics/agents \"Topic: agents\") [ multi-agent-systems ](https://github.com/topics/multi-agent-systems \"Topic: multi-agent-systems\") [ ai-agents ](https://github.com/topics/ai-agents \"Topic: ai-agents\") [ multi-agents ](https://github.com/topics/multi-agents \"Topic: multi-agents\") [ llm ](https://github.com/topics/llm \"Topic: llm\") [ llms ](https://github.com/topics/llms \"Topic: llms\") [ genai ](https://github.com/topics/genai \"Topic: genai\") [ agentic ](https://github.com/topics/agentic \"Topic: agentic\") [ genai-chatbot ](https://github.com/topics/genai-chatbot \"Topic: genai-chatbot\") [ agentic-ai ](https://github.com/topics/agentic-ai \"Topic: agentic-ai\") [ multi-agents-collaboration ](https://github.com/topics/multi-agents-collaboration \"Topic: multi-agents-collaboration\") [ aiagentframework ](https://github.com/topics/aiagentframework \"Topic: aiagentframework\") [ agents-sdk ](https://github.com/topics/agents-sdk \"Topic: agents-sdk\")\n### Resources\n[ ](https://github.com/google/adk-python#readme-ov-file)\n### License\n[ ](https://github.com/google/adk-python#Apache-2.0-1-ov-file)\n### Code of conduct\n[ ](https://github.com/google/adk-python#coc-ov-file)\n### Contributing\n[ ](https://github.com/google/adk-python#contributing-ov-file)\n### Security policy\n[ ](https://github.com/google/adk-python#security-ov-file)\n###  Uh oh! \nThere was an error while loading. [Please reload this page](https://github.com/google/adk-python).\n[Activity](https://github.com/google/adk-python/activity)\n[Custom properties](https://github.com/google/adk-python/custom-properties)\n### Stars\n[**15.7k** stars](https://github.com/google/adk-python/stargazers)\n### Watchers\n[**137** watching](https://github.com/google/adk-python/watchers)\n### Forks\n[**2.5k** forks](https://github.com/google/adk-python/forks)\n[ Report repository ](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python&report=google+%28user%29)\n##  [Releases 30](https://github.com/google/adk-python/releases)\n[ 1.19.0 Latest  Nov 20, 2025 ](https://github.com/google/adk-python/releases/tag/v1.19.0)\n[+ 29 releases](https://github.com/google/adk-python/releases)\n##  [Packages 0](https://github.com/orgs/google/packages?repo_name=adk-python)\nNo packages published   \n\n##  [Used by 2.8k](https://github.com/google/adk-python/network/dependents)\n[\n  * ![@WRLDInc](https://avatars.githubusercontent.com/u/56140573?s=64&v=4)\n  * ![@Klavis-AI](https://avatars.githubusercontent.com/u/205720652?s=64&v=4)\n  * ![@restatedev](https://avatars.githubusercontent.com/u/97341811?s=64&v=4)\n  * ![@Devvekariya711](https://avatars.githubusercontent.com/u/207506349?s=64&v=4)\n  * ![@Jineshkumar1](https://avatars.githubusercontent.com/u/85137150?s=64&v=4)\n  * ![@nextlinktechnology](https://avatars.githubusercontent.com/u/60595633?s=64&v=4)\n  * ![@abdulrahman305](https://avatars.githubusercontent.com/u/131770526?s=64&v=4)\n  * ![@Langdock](https://avatars.githubusercontent.com/u/136317085?s=64&v=4)\n\n+ 2,819  ](https://github.com/google/adk-python/network/dependents)\n##  [Contributors 206](https://github.com/google/adk-python/graphs/contributors)\n  * [ ![@seanzhougoogle](https://avatars.githubusercontent.com/u/69162095?s=64&v=4) ](https://github.com/seanzhougoogle)\n  * [ ![@google-genai-bot](https://avatars.githubusercontent.com/u/194307901?s=64&v=4) ](https://github.com/google-genai-bot)\n  * [ ![@hangfei](https://avatars.githubusercontent.com/u/5482153?s=64&v=4) ](https://github.com/hangfei)\n  * [ ![@Jacksunwei](https://avatars.githubusercontent.com/u/1281348?s=64&v=4) ](https://github.com/Jacksunwei)\n  * [ ![@DeanChensj](https://avatars.githubusercontent.com/u/9414763?s=64&v=4) ](https://github.com/DeanChensj)\n  * [ ![@xuanyang15](https://avatars.githubusercontent.com/u/13991296?s=64&v=4) ](https://github.com/xuanyang15)\n  * [ ![@GWeale](https://avatars.githubusercontent.com/u/51099682?s=64&v=4) ](https://github.com/GWeale)\n  * [ ![@ankursharmas](https://avatars.githubusercontent.com/u/5462261?s=64&v=4) ](https://github.com/ankursharmas)\n  * [ ![@wuliang229](https://avatars.githubusercontent.com/u/18244712?s=64&v=4) ](https://github.com/wuliang229)\n  * [ ![@wyf7107](https://avatars.githubusercontent.com/u/14008276?s=64&v=4) ](https://github.com/wyf7107)\n  * [ ![@selcukgun](https://avatars.githubusercontent.com/u/5055758?s=64&v=4) ](https://github.com/selcukgun)\n  * [ ![@wukath](https://avatars.githubusercontent.com/u/108756731?s=64&v=4) ](https://github.com/wukath)\n  * [ ![@copybara-github](https://avatars.githubusercontent.com/u/32201506?s=64&v=4) ](https://github.com/copybara-github)\n  * [ ![@XinranTang](https://avatars.githubusercontent.com/u/33537857?s=64&v=4) ](https://github.com/XinranTang)\n\n\n[+ 192 contributors](https://github.com/google/adk-python/graphs/contributors)\n## Languages\n  * [ Python 94.8% ](https://github.com/google/adk-python/search?l=python)\n  * [ Jupyter Notebook 4.3% ](https://github.com/google/adk-python/search?l=jupyter-notebook)\n  * Other 0.9%\n\n\n## Footer\n[ ](https://github.com) ¬© 2025 GitHub, Inc. \n### Footer navigation\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Community](https://github.community/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\n"
                        }
                      }
                    },
                    {
                      "function_response": {
                        "id": "call_59130861",
                        "name": "adaptive_crawl_tool",
                        "response": {
                          "result": "# Adaptive Result from https://github.com/google/adk-python/issues\n\n[Skip to content](https://github.com/google/adk-python/issues#start-of-content)\n## Navigation Menu\nToggle navigation\n[ ](https://github.com/)\n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python%2Fissues)\nAppearance settings\n  * Platform\n    * AI CODE CREATION\n      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)\n      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)\n      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)\n      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)\n    * DEVELOPER WORKFLOWS\n      * [ ActionsAutomate any workflow ](https://github.com/features/actions)\n      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)\n      * [ IssuesPlan and track work ](https://github.com/features/issues)\n      * [ Code ReviewManage code changes ](https://github.com/features/code-review)\n    * APPLICATION SECURITY\n      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)\n      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)\n      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)\n    * EXPLORE\n      * [Why GitHub](https://github.com/why-github)\n      * [Documentation](https://docs.github.com)\n      * [Blog](https://github.blog)\n      * [Changelog](https://github.blog/changelog)\n      * [Marketplace](https://github.com/marketplace)\n[View all features](https://github.com/features)\n  * Solutions\n    * BY COMPANY SIZE\n      * [Enterprises](https://github.com/enterprise)\n      * [Small and medium teams](https://github.com/team)\n      * [Startups](https://github.com/enterprise/startups)\n      * [Nonprofits](https://github.com/solutions/industry/nonprofits)\n    * BY USE CASE\n      * [App Modernization](https://github.com/solutions/use-case/app-modernization)\n      * [DevSecOps](https://github.com/solutions/use-case/devsecops)\n      * [DevOps](https://github.com/solutions/use-case/devops)\n      * [CI/CD](https://github.com/solutions/use-case/ci-cd)\n      * [View all use cases](https://github.com/solutions/use-case)\n    * BY INDUSTRY\n      * [Healthcare](https://github.com/solutions/industry/healthcare)\n      * [Financial services](https://github.com/solutions/industry/financial-services)\n      * [Manufacturing](https://github.com/solutions/industry/manufacturing)\n      * [Government](https://github.com/solutions/industry/government)\n      * [View all industries](https://github.com/solutions/industry)\n[View all solutions](https://github.com/solutions)\n  * Resources\n    * EXPLORE BY TOPIC\n      * [AI](https://github.com/resources/articles?topic=ai)\n      * [Software Development](https://github.com/resources/articles?topic=software-development)\n      * [DevOps](https://github.com/resources/articles?topic=devops)\n      * [Security](https://github.com/resources/articles?topic=security)\n      * [View all topics](https://github.com/resources/articles)\n    * EXPLORE BY TYPE\n      * [Customer stories](https://github.com/customer-stories)\n      * [Events & webinars](https://github.com/resources/events)\n      * [Ebooks & reports](https://github.com/resources/whitepapers)\n      * [Business insights](https://github.com/solutions/executive-insights)\n      * [GitHub Skills](https://skills.github.com)\n    * SUPPORT & SERVICES\n      * [Documentation](https://docs.github.com)\n      * [Customer support](https://support.github.com)\n      * [Community forum](https://github.com/orgs/community/discussions)\n      * [Trust center](https://github.com/trust-center)\n      * [Partners](https://github.com/partners)\n  * Open Source\n    * COMMUNITY\n      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)\n    * PROGRAMS\n      * [Security Lab](https://securitylab.github.com)\n      * [Maintainer Community](https://maintainers.github.com)\n      * [Accelerator](https://github.com/accelerator)\n      * [Archive Program](https://archiveprogram.github.com)\n    * REPOSITORIES\n      * [Topics](https://github.com/topics)\n      * [Trending](https://github.com/trending)\n      * [Collections](https://github.com/collections)\n  * Enterprise\n    * ENTERPRISE SOLUTIONS\n      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)\n    * AVAILABLE ADD-ONS\n      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)\n      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)\n      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)\n  * [Pricing](https://github.com/pricing)\n\n\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\nSearch \nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n#  Provide feedback \nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancel  Submit feedback \n#  Saved searches \n## Use saved searches to filter your results more quickly\nName\nQuery\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \nCancel  Create saved search \n[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fadk-python%2Fissues)\n[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fissues%2Findex&source=header-repo&source_repo=google%2Fadk-python)\nAppearance settings\nResetting focus\nYou signed in with another tab or window. [Reload](https://github.com/google/adk-python/issues) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/google/adk-python/issues) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/google/adk-python/issues) to refresh your session. Dismiss alert\n{{ message }}\n[ google ](https://github.com/google) / **[adk-python](https://github.com/google/adk-python) ** Public\n  * [ ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python) You must be signed in to change notification settings\n  * [ 2.5k ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n  * [ Star  15.7k ](https://github.com/login?return_to=%2Fgoogle%2Fadk-python)\n\n\n  * [ Code ](https://github.com/google/adk-python)\n  * [ Issues 354 ](https://github.com/google/adk-python/issues)\n  * [ Pull requests 102 ](https://github.com/google/adk-python/pulls)\n  * [ Discussions ](https://github.com/google/adk-python/discussions)\n  * [ Actions ](https://github.com/google/adk-python/actions)\n  * [ Projects 0 ](https://github.com/google/adk-python/projects)\n  * [ Security ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n[ ](https://github.com/google/adk-python/security)\n### [ Uh oh!  ](https://github.com/google/adk-python/security)\n[There was an error while loading. ](https://github.com/google/adk-python/security)[Please reload this page](https://github.com/google/adk-python/issues).\n  * [ Insights ](https://github.com/google/adk-python/pulse)\n\n\nAdditional navigation options\n  * [ Code  ](https://github.com/google/adk-python)\n  * [ Issues  ](https://github.com/google/adk-python/issues)\n  * [ Pull requests  ](https://github.com/google/adk-python/pulls)\n  * [ Discussions  ](https://github.com/google/adk-python/discussions)\n  * [ Actions  ](https://github.com/google/adk-python/actions)\n  * [ Projects  ](https://github.com/google/adk-python/projects)\n  * [ Security  ](https://github.com/google/adk-python/security)\n  * [ Insights  ](https://github.com/google/adk-python/pulse)\n\n\n# Issues\nSearch Issues\nis:issuestate:open\nis:issue state:open \nSearch\n[Labels](https://github.com/google/adk-python/labels)[Milestones](https://github.com/google/adk-python/milestones)[New issue](https://github.com/login?return_to=https://github.com/google/adk-python/issues)\n## Search results\n  * [Open 354 (354)](https://github.com/google/adk-python/issues)\n  * [Closed 1,430 (1,430)](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aclosed)\n\n\nAuthor\nLabels\nProjects\nMilestones\nAssignees\nTypes\nSort by Newest, descending\n  * ### [Swagger/OpenAPI Docs Fail to Load with google-adk >= 1.19.0 (Internal Server Error on /openapi.json)](https://github.com/google/adk-python/issues/3750)\nStatus: Open.\n#3750 In google/adk-python;\n¬∑ [acloudpotato](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aacloudpotato) opened on Nov 28, 2025\n  * ### [Support stopping response after tool call (similar feature supported in Agno)](https://github.com/google/adk-python/issues/3748)\nStatus: Open.\n#3748 In google/adk-python;\n¬∑ [jamie0725](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Ajamie0725) opened on Nov 28, 2025\n  * ### [getting asyncio.exceptions.CancelledError when running pytest evalation for agent which uses mcptoolset](https://github.com/google/adk-python/issues/3746)\nStatus: Open.\n#3746 In google/adk-python;\n¬∑ [VandanaJn](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3AVandanaJn) opened on Nov 28, 2025\n  * ### [[Live] Transcription History is not sent in agent transfer with ADK 1.19.0](https://github.com/google/adk-python/issues/3742)\nStatus: Open.\n#3742 In google/adk-python;\n¬∑ [simone-viozzi](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Asimone-viozzi) opened on Nov 27, 2025\n  * ### [list_sessions of InMemorySessionService never includes events](https://github.com/google/adk-python/issues/3741)\nStatus: Open.\n#3741 In google/adk-python;\n¬∑ [connor-qua](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aconnor-qua) opened on Nov 27, 2025\n  * ### [Guidance on Mocking MCP Toolbox Request and Responses for Testing (Agent Evaluation)](https://github.com/google/adk-python/issues/3740)\n[answered[Status] This issue has been answered by the maintainer](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Aanswered)[Status] This issue has been answered by the maintainer\n[eval[Component] This issue is related to evaluation](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Aeval)[Component] This issue is related to evaluation\n[question[Component] This issue is asking a question or clarification](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Aquestion)[Component] This issue is asking a question or clarification\nStatus: Open.\n[Task](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ATask)\n#3740 In google/adk-python;\n¬∑ [sivakumar-d3v](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Asivakumar-d3v) opened on Nov 27, 2025\n3 comments\n[![surajksharma07](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20assignee%3Asurajksharma07)\n  * ### [Global Instructions not getting applied using the GlobalInstructionPlugin](https://github.com/google/adk-python/issues/3739)\nStatus: Open.\n#3739 In google/adk-python;\n¬∑ [iampushkar](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aiampushkar) opened on Nov 27, 2025\n  * ### [ValueError: \"Both invocation_id and new_message are None.\" during second turn when frontend (copilotkit) interacts with ag_ui_adk on Python 3.12](https://github.com/google/adk-python/issues/3735)\nStatus: Open.\n#3735 In google/adk-python;\n¬∑ [ywan614](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aywan614) opened on Nov 27, 2025\n  * ### [Is it possible to create a dynamic configurable agent?](https://github.com/google/adk-python/issues/3732)\n[core[Component] This issue is related to the core interface and implementation](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Acore)[Component] This issue is related to the core interface and implementation\n[needs-review[Status] The PR is awaiting review from the maintainer](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Aneeds-review)[Status] The PR is awaiting review from the maintainer\nStatus: Open.\n[Feature](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3AFeature)\n#3732 In google/adk-python;\n¬∑ [Morriaty-The-Murderer](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3AMorriaty-The-Murderer) opened on Nov 27, 2025\n1 comment\n[![surajksharma07](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20assignee%3Asurajksharma07)\n  * ### [Critical Runtime Crash: RuntimeError: Attempted to exit cancel scope... when using MCPToolset on Vertex AI Agent Engine](https://github.com/google/adk-python/issues/3731)\n[mcp[Component] Issues about MCP support](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Amcp)[Component] Issues about MCP support\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3731 In google/adk-python;\n¬∑ [priyayarrabolu-boop](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Apriyayarrabolu-boop) opened on Nov 27, 2025\n  * ### [Ollama_chatException - {\"error\":\"json: cannot unmarshal array into Go struct field ChatRequest.messages.content of type string\"}](https://github.com/google/adk-python/issues/3727)\n[core[Component] This issue is related to the core interface and implementation](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Acore)[Component] This issue is related to the core interface and implementation\n[models[Component] Issues related to model support](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Amodels)[Component] Issues related to model support\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3727 In google/adk-python;\n¬∑ [Yashwant00CR7](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3AYashwant00CR7) opened on Nov 26, 2025\n  * ### [Ollama and Gemini Model Integration](https://github.com/google/adk-python/issues/3726)\n[models[Component] Issues related to model support](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Amodels)[Component] Issues related to model support\n[need attention[Status] This issue is important but the maintainers haven't started working on it](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3A%22need%20attention%22)[Status] This issue is important but the maintainers haven't started working on it\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3726 In google/adk-python;\n¬∑ [Yashwant00CR7](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3AYashwant00CR7) opened on Nov 26, 2025\n2 comments\n[![wyf7107](https://avatars.githubusercontent.com/u/14008276?s=64&v=4)](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20assignee%3Awyf7107)[![surajksharma07](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20assignee%3Asurajksharma07)\n  * ### [BigQuery Toolset OAuth Token Key Mismatch with Gemini Enterprise](https://github.com/google/adk-python/issues/3725)\n[core[Component] This issue is related to the core interface and implementation](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Acore)[Component] This issue is related to the core interface and implementation\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3725 In google/adk-python;\n¬∑ [svelezdevilla](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Asvelezdevilla) opened on Nov 26, 2025\n  * ### [Refactor BigQuery Analytics Plugin to use Structured JSON](https://github.com/google/adk-python/issues/3724)\n[core[Component] This issue is related to the core interface and implementation](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Acore)[Component] This issue is related to the core interface and implementation\nStatus: Open.\n#3724 In google/adk-python;\n¬∑ [amenegola](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aamenegola) opened on Nov 26, 2025\n1\n  * ### [Send message to the ADK API and display in the chat/session](https://github.com/google/adk-python/issues/3722)\n[services[Component] This issue is related to runtime services, e.g. sessions, memory, artifacts, etc](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Aservices)[Component] This issue is related to runtime services, e.g. sessions, memory, artifacts, etc\nStatus: Open.\n#3722 In google/adk-python;\n¬∑ [zdenulo](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Azdenulo) opened on Nov 26, 2025\n5 comments\n  * ### [A2A Request Metadata Failure](https://github.com/google/adk-python/issues/3721)\n[core[Component] This issue is related to the core interface and implementation](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Acore)[Component] This issue is related to the core interface and implementation\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3721 In google/adk-python;\n¬∑ [xbill9](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Axbill9) opened on Nov 26, 2025\n  * ### [OpenAPIToolset does not provide a way to use a different CA (eg. Enterprise TLS proxy)](https://github.com/google/adk-python/issues/3720)\n[tools[Component] This issue is related to tools](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Atools)[Component] This issue is related to tools\nStatus: Open.\n[Feature](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3AFeature)\n#3720 In google/adk-python;\n¬∑ [asnowfix](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aasnowfix) opened on Nov 26, 2025\n  * ### [Error during async stream generation: 404 NOT_FOUND](https://github.com/google/adk-python/issues/3719)\n[agent engine[Component] This issue is related to Agent Engine deployment](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3A%22agent%20engine%22)[Component] This issue is related to Agent Engine deployment\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3719 In google/adk-python;\n¬∑ [ahmed-othm](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aahmed-othm) opened on Nov 26, 2025\n2 comments\n  * ### [`adk web` does not render Eval tab when more than one agent folder exists](https://github.com/google/adk-python/issues/3718)\n[web[Component] This issue will be transferred to adk-web](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Aweb)[Component] This issue will be transferred to adk-web\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3718 In google/adk-python;\n¬∑ [olliefr](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aolliefr) opened on Nov 26, 2025\n2 comments\n  * ### [Title: DatabaseSessionService.append_event raises stale session error with LongRunningFunctionTool ADK Version](https://github.com/google/adk-python/issues/3717)\n[core[Component] This issue is related to the core interface and implementation](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Acore)[Component] This issue is related to the core interface and implementation\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3717 In google/adk-python;\n¬∑ [hungpq-ai](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Ahungpq-ai) opened on Nov 26, 2025\n  * ### [When using HITL inside a sequential / loop workflow, the subagent after the HITL agent never gets executed unless manually triggered from adk web](https://github.com/google/adk-python/issues/3716)\n[google support[Status] This issue is hand offed to google support team](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3A%22google%20support%22)[Status] This issue is hand offed to google support team\n[tools[Component] This issue is related to tools](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Atools)[Component] This issue is related to tools\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3716 In google/adk-python;\n¬∑ [ashwinjo](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aashwinjo) opened on Nov 26, 2025\n1 comment\n[![surajksharma07](https://avatars.githubusercontent.com/u/228440606?s=64&u=fab6bf43670a6af8dc415d2d03c07555c77adb65&v=4)](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20assignee%3Asurajksharma07)\n  * ### [Bug: Unable to create session for Agent Engine deployment when deploying with event compaction/context caching](https://github.com/google/adk-python/issues/3715)\n[agent engine[Component] This issue is related to Agent Engine deployment](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3A%22agent%20engine%22)[Component] This issue is related to Agent Engine deployment\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3715 In google/adk-python;\n¬∑ [juszzz](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Ajuszzz) opened on Nov 26, 2025\n1\n5 comments\n  * ### [Bug: formatted response only works with some model providers](https://github.com/google/adk-python/issues/3713)\n[models[Component] Issues related to model support](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Amodels)[Component] Issues related to model support\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3713 In google/adk-python;\n¬∑ [david-velasquez-v](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Adavid-velasquez-v) opened on Nov 26, 2025\n2 comments\n[![GWeale](https://avatars.githubusercontent.com/u/51099682?s=64&u=a2b7d2e577160a7c2dd023b3dbf5a8fff08ee9a8&v=4)](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20assignee%3AGWeale)\n  * ### [tool_trajectory_avg_score class doesn't accept string values for `match_type`](https://github.com/google/adk-python/issues/3711)\n[eval[Component] This issue is related to evaluation](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Aeval)[Component] This issue is related to evaluation\nStatus: Open.\n[Bug](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3ABug)\n#3711 In google/adk-python;\n¬∑ [alexhermida](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Aalexhermida) opened on Nov 25, 2025\n  * ### [feat: Add web API endpoints to retrieve artifact metadata](https://github.com/google/adk-python/issues/3710)\n[web[Component] This issue will be transferred to adk-web](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20label%3Aweb)[Component] This issue will be transferred to adk-web\nStatus: Open.\n[Feature](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20type%3AFeature)\n#3710 In google/adk-python;\n¬∑ [snbaker](https://github.com/google/adk-python/issues?q=is%3Aissue%20state%3Aopen%20author%3Asnbaker) opened on Nov 25, 2025\n1\n\n\n[1](https://github.com/google/adk-python/issues?page=1)[2](https://github.com/google/adk-python/issues?page=2)[3](https://github.com/google/adk-python/issues?page=3)[4](https://github.com/google/adk-python/issues?page=4)[5](https://github.com/google/adk-python/issues?page=5)[6](https://github.com/google/adk-python/issues?page=6)[7](https://github.com/google/adk-python/issues?page=7)[8](https://github.com/google/adk-python/issues?page=8)‚Ä¶[14](https://github.com/google/adk-python/issues?page=14)[15](https://github.com/google/adk-python/issues?page=15)[Next](https://github.com/google/adk-python/issues?page=2)\n## Footer\n[ ](https://github.com) ¬© 2025 GitHub, Inc. \n### Footer navigation\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Community](https://github.community/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\nIssues ¬∑ google/adk-python ¬∑ GitHub\n354 results\n"
                        }
                      }
                    }
                  ],
                  "role": "user"
                }
              },
              {
                "author": "Code_Surgeon_Agent",
                "content": {
                  "parts": [
                    {
                      "function_call": {
                        "id": "call_27564279",
                        "args": {
                          "key": "packages"
                        },
                        "name": "retrieve_context"
                      }
                    },
                    {
                      "function_call": {
                        "id": "call_81991433",
                        "args": {
                          "key": "versions"
                        },
                        "name": "retrieve_context"
                      }
                    }
                  ],
                  "role": "model"
                }
              },
              {
                "author": "Code_Surgeon_Agent",
                "content": {
                  "parts": [
                    {
                      "function_response": {
                        "id": "call_27564279",
                        "name": "retrieve_context",
                        "response": {
                          "result": "Not found"
                        }
                      }
                    },
                    {
                      "function_response": {
                        "id": "call_81991433",
                        "name": "retrieve_context",
                        "response": {
                          "result": "Not found"
                        }
                      }
                    }
                  ],
                  "role": "user"
                }
              },
              {
                "author": "Verification_Agent",
                "content": {
                  "parts": [
                    {
                      "function_call": {
                        "id": "call_30455985",
                        "args": {
                          "requirements_content": "google-adk==1.19.0\n# Optional: Explicit pins for common eval deps if local issues persist\n# numpy>=1.24.0  # Handles large int/float precision\n# pandas>=2.0.0  # Nullable Int64 for NaN\n# torch>=2.0.0   # .item() on tensors\nlitellm>=1.44.0  # For LiteLlm + Ollama workaround"
                        },
                        "name": "validate_requirements"
                      }
                    }
                  ],
                  "role": "model"
                }
              },
              {
                "author": "Verification_Agent",
                "content": {
                  "parts": [
                    {
                      "function_response": {
                        "id": "call_30455985",
                        "name": "validate_requirements",
                        "response": {
                          "result": "SUCCESS"
                        }
                      }
                    }
                  ],
                  "role": "user"
                }
              },
              {
                "author": "Verification_Agent",
                "content": {
                  "parts": [
                    {
                      "text": "Verification Passed"
                    },
                    {
                      "function_call": {
                        "id": "call_03517618",
                        "args": {
                          "key": "verification_status",
                          "value": "SUCCESS"
                        },
                        "name": "save_context"
                      }
                    }
                  ],
                  "role": "model"
                }
              },
              {
                "author": "Verification_Agent",
                "content": {
                  "parts": [
                    {
                      "function_response": {
                        "id": "call_03517618",
                        "name": "save_context",
                        "response": {
                          "result": "Saved verification_status to state."
                        }
                      }
                    }
                  ],
                  "role": "user"
                }
              }
            ]
          },
          "creation_timestamp": 1764336166.841116
        }
      ],
      "session_input": {
        "app_name": "src",
        "user_id": "user"
      },
      "creation_timestamp": 1764336428.64961
    }
  ],
  "creation_timestamp": 1764258481.148735
}